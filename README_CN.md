# ä½ å¥½, å¼€å‘è€…ï¼æ¬¢è¿ä½¿ç”¨ SuperTextView


 [![](https://jitpack.io/v/chenbingx/supertextview.svg)](https://jitpack.io/#chenbingx/supertextview) [![](https://img.shields.io/badge/SuperTextView-v3.2.4-orange.svg)](https://github.com/chenBingX/SuperTextView)  [![](https://img.shields.io/badge/SuperTextView-v3.2.4.64-orange.svg)](https://github.com/chenBingX/SuperTextView) [![](https://img.shields.io/badge/build-passing-brightgreen.svg)](https://github.com/chenBingX/SuperTextView) [![](https://img.shields.io/badge/API-19+-yellowgreen.svg)](https://android-arsenal.com/api?level=14#l14) [![](https://img.shields.io/badge/License-Apache--2.0-blueviolet.svg)](https://github.com/chenBingX/SuperTextView#license) [![](https://img.shields.io/badge/Author-CoorChice-blue.svg)](https://weibo.com/5406092281/profile?topnav=1&wvr=6) [![](https://img.shields.io/badge/äº¤æµç¾¤-775951525-ff5722.svg)](https://jq.qq.com/?_wv=1027&k=5DIRlPm)


# [**English**](https://github.com/chenBingX/SuperTextView) | **ä¸­æ–‡**

<img src="https://raw.githubusercontent.com/chenBingX/img/master/stv/STV_icon.png" width=200 height=200 align=right alt="SuperTextView">

å˜¿ï¼Œå¼€å‘è€…ä½ å¥½ï¼Œæ¬¢è¿ä½¿ç”¨ **SuperTextView** ï¼

æ„Ÿè°¢ä½ åŠå…¨çƒæ•°ä¸‡ **Android** å¼€å‘è€…çš„ä¿¡èµ– ğŸ˜˜ã€‚

**SuperTextView** çš„ä¸ä¼—ä¸åŒåœ¨äºï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç®€å•çš„æ§ä»¶å…ƒç´ ï¼Œä½†å´ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ§ä»¶ã€‚å®ƒç”Ÿè€ŒçµåŠ¨å¤šå˜ï¼Œå¼ºå¤§çš„å†…åµŒé€»è¾‘ï¼Œä¸ºä½ æŒç»­æä¾›ä¸°å¯Œå¤šå½©å´å¼‚å¸¸ç®€å•çš„å¼€å‘æ”¯æŒã€‚

**SuperTextView** å°†ä½ ä»å¤æ‚çš„æ¸²æŸ“é€»è¾‘ä¸­è§£æ•‘å‡ºæ¥ï¼Œä¸€è¡Œç®€å•çš„ **API** æ¥å£è°ƒç”¨ï¼Œç‚«ç›®æ¸²æŸ“çš„æ•ˆæœå³åˆ»è€Œè‡³ã€‚

ä½ åªéœ€äº«å—è‡ªå·±æ‰€ç¼–å†™å‡ºçš„æƒŠäººè§†æ•ˆï¼Œå‰©ä¸‹çš„ä¸€åˆ‡å°±æ”¾å¿ƒäº¤ç»™ **SuperTextView**ã€‚

# ç‰¹æ€§
- ä¸º **View** è®¾ç½®åœ†è§’
- æ”¯æŒå•ç‹¬æ§åˆ¶æ¯ä¸€ä¸ªåœ†è§’
- ä¸º **View** æ·»åŠ è¾¹æ¡†
- ä¸ºæ–‡å­—å¢åŠ æè¾¹æˆ–ç©ºå¿ƒæ•ˆæœ
- æ”¯æŒæœ€å¤š 2 ä¸ª **Drawable** å±•ç¤º
- å¯å‡†ç¡®æ§åˆ¶ **Drawable** å¤§å°åŠä½ç½®
- æ”¯æŒæ¸å˜è‰²èƒŒæ™¯
- è§¦æ‘¸å˜è‰²
- å±•ç¤ºå›¾ç‰‡ï¼ŒåŒ…æ‹¬ç½‘ç»œå›¾ç‰‡
- ä¸ºå›¾ç‰‡è®¾ç½®åœ†è§’
- ä¸ºå›¾ç‰‡å¢åŠ è¾¹æ¡†
- å¯æ’å…¥æ“ä½œçš„ **Adjuster** æ¨¡å—
- ä¿®æ”¹ **Drawable** çš„é¢œè‰²
- ä¿®æ”¹ **Drawable** çš„æ—‹è½¬è§’åº¦
- æ”¯æŒæ–‡å­—æ¸å˜è‰²æ•ˆæœ
- æ”¯æŒä¸º **Drawable** åŒºåŸŸå•ç‹¬è®¾ç½®ç‚¹å‡»äº‹ä»¶
- æ”¯æŒ **Gif** å›¾å±•ç¤º
- æ”¯æŒä¸º **Gif** å›¾æ·»åŠ è¾¹æ¡†ï¼Œä»¥åŠåœ†è§’
- æ”¯æŒ **Gif** å›¾æš‚åœ/æ’­æ”¾ã€ä¿®æ”¹å¸§ç‡
- æ”¯æŒæå–æŒ‡å®š **Gif å¸§
- ...

# Demo å’Œæ¼”ç¤º

[ ğŸ“² ç‚¹å‡»æ­¤å¤„ï¼ˆæˆ–æ‰«æä¸‹æ–¹äºŒç»´ç ï¼‰ï¼Œä¸‹è½½ä½“éªŒ **Demo**](https://raw.githubusercontent.com/chenBingX/img/master/%E5%85%B6%E5%AE%83%E6%96%87%E4%BB%B6/STVDemo.apk)

<img src="https://raw.githubusercontent.com/chenBingX/img/master/stv/stv_Demo_url.png" width=150 height=150 align=center alt="SuperTextView">

|||||
|:---:|:---:|:---:|:---:|
|![](https://raw.githubusercontent.com/chenBingX/img/master/stv/stv_page1.gif)|![](https://raw.githubusercontent.com/chenBingX/img/master/stv/stv_page2.gif)|![](https://raw.githubusercontent.com/chenBingX/img/master/stv/stv_page3.gif)|![](https://raw.githubusercontent.com/chenBingX/img/master/stv/stv_page4.gif)|


# ä¼ é€é—¨åŒº

- [ã€ä¼ é€é—¨ã€‘ï¼šã€ŠSuperTextView å¼€å‘å‚è€ƒæ–‡æ¡£ã€‹- ä½ å¯ä»¥å­¦ä¹ åˆ°å¦‚ä½•ä½¿ç”¨ SuperTextView æ¥æé«˜ä½ çš„åº”ç”¨çš„æ„å»ºæ•ˆç‡](https://github.com/chenBingX/SuperTextView/wiki/%E9%A6%96%E9%A1%B5)

- [ã€ä¼ é€é—¨ã€‘ï¼šã€ŠSuperTextView APIæ–‡æ¡£ã€‹â€” ä½ å¯ä»¥æŸ¥çœ‹ SuperTextView æ‰€æœ‰å¯ç”¨ API åŠå±æ€§](https://chenbingx.github.io/SuperTextView/SuperTextView-doc/index.html)


# å¦‚ä½•å¼€å§‹ä½¿ç”¨


åœ¨ä½ çš„**build.gradle**ä¸­åŠ å…¥ï¼š

```
allprojects {
    repositories {
        ...
        maven { url 'https://jitpack.io' }
    }
}

dependencies {
    compile 'com.github.chenBingX:SuperTextView:VERSION_CODE'
}
```

[ç”¨è¿™é‡Œçš„çœŸå®å‘è¡Œç‰ˆæœ¬å·, æ›¿æ¢ VERSION_CODE](https://github.com/chenBingX/SuperTextView/releases)

> âš ï¸ ç‰¹åˆ«æ³¨æ„ï¼šæ··æ·†è¯·åŠ ä¸Š `-keep class com.coorchice.library.gifdecoder.JNI { *; }`

# è¿‘æœŸæ›´æ–°

## v3.2.5

- ä¿®å¤ `stv_pressBgColor` å¤±æ•ˆ

## v3.2.4

- ä¿®å¤Drawableç›´æ¥å†™16è¿›åˆ¶é¢œè‰²å€¼ï¼Œä¸æ˜¾ç¤ºçš„é—®é¢˜

- Drawable æ”¯æŒæŒ‡å®šå±‚çº§

    ```
    <com.coorchice.library.SuperTextView
        ...
        // é…ç½® Drawable1 çš„å±‚çº§
        app:stv_state_drawable_layer="beforeText"
        // é…ç½® Drawable2 çš„å±‚çº§
        app:stv_state_drawable2_layer="afterText"
        ...
        />
    ```

    æ”¯æŒæ¨¡å¼:

        - `beforeText`ï¼Œåœ¨æ–‡å­—å‰
        - `afterText`ï¼Œåœ¨æ–‡å­—å

    **Java** ä¸­æœ‰å¯¹åº”å‡½æ•°æ”¯æŒåŠ¨æ€é…ç½®ã€‚

- ä¿®å¤ Drawable1 ä½œä¸ºèƒŒæ™¯å›¾æ—¶ï¼Œç¼©æ”¾æ¨¡å¼ scaleType åˆ‡æ¢å¤±æ•ˆé—®é¢˜

## v3.2.3

- ä¼˜åŒ–æ–‡å­—æè¾¹

- ä¼˜åŒ–é€æ˜gifçš„å±•ç¤º

## v3.2.1 - å¤§æœ‰å¯ä¸ºï¼ŒSuperTextView

åœ¨å…¨æ–°çš„ `v3.2.0` ç‰ˆæœ¬ä¸­ï¼Œ**SuperTextView** å†ä¸€æ¬¡é‡æ–°å®šä¹‰äº†è‡ªå·±ã€‚å¼€å‘è€…ï¼Œæ¥çœ‹çœ‹ç²¾å¿ƒä¸ºä½ å‡†å¤‡çš„æƒŠå–œå§ï¼ğŸ‰ğŸ‰ğŸ‰

### è¿™æ˜¯... Gif ï¼Ÿ

è¿™ä¸€æ¬¡ï¼Œ**SuperTextView** ä¸ºå¼€å‘è€…å¸¦æ¥äº†å¼ºåŠ›çš„ **Gif** é©±åŠ¨æ”¯æŒã€‚

å¦‚æœåœ¨è¿‡å»ï¼Œä½ æ›¾ç»ä¸ºå¦‚ä½•åœ¨ Android å¹³å°ä¸Šå±•ç¤ºä¸€å¼  **Gif** å›¾è€Œè‹¦æ¼å¤šæ—¥ï¼Œæˆ–æ˜¯å›°äºä¸€äº›ä¸‰æ–¹ **Gif** åº“çš„æ€§èƒ½æ·±æ¸Šä¸­è¿·å¤±æ–¹å‘ã€‚é‚£ä¹ˆç°åœ¨ï¼Œ**SuperTextView** å°†å½»åº•æ”¹å˜è¿™ä¸€ç°çŠ¶ã€‚

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/gif_demo1.gif)

**Gif** å›¾ä¸ **SuperTextView** å¤©ç”Ÿå°±æ˜¯æµ‘ç„¶å¤©æˆï¼Œå› æ­¤ï¼Œä½ å¯ä»¥é€šè¿‡ä½ æœ€ç†Ÿæ‚‰çš„ã€æœ€è‡ªç„¶çš„æ–¹å¼æ¥è®©ä¸€å¼  **Gif** å›¾è·å¾—å±•ç¤ºã€‚å°±åƒä½ å¾€å¸¸å±•ç¤ºä¸€å¼ æ™®é€šå›¾ç‰‡é‚£æ ·ç®€å•ã€‚

å¾—ç›Šäº **c/c++** çš„è¶…é«˜æ€§èƒ½ï¼Œä»¥åŠå¯¹å†…å­˜çš„ç²¾ç¡®æ“ä½œã€‚**SuperTextView** é€šè¿‡ä½¿ç”¨ **c/c++** ä¸ºç§»åŠ¨å¹³å°ä¸“é—¨å®šåˆ¶äº†æ€§èƒ½å¼ºæ‚çš„ **Gif** é©±åŠ¨å¼•æ“ã€‚

**SuperTextView** çš„ **Gif** å¼•æ“ï¼Œèƒ½å¤Ÿç²¾ç¡®æ“ä½œå›¾åƒåƒç´ å†…å­˜ï¼Œåœ¨ **Gif** å›¾åƒçš„å¸§åˆ·æ–°æ—¶ï¼Œåªå¯¹å±€éƒ¨åƒç´ å†…å­˜è¿›è¡Œæ›´æ–°ï¼Œè¿™è®© **Gif** å›¾åƒæ¸²æŸ“æ•ˆç‡å¾—åˆ°äº†è´¨çš„é£è·ƒã€‚

é€šè¿‡å¼‚æ­¥ç¦»å±æ¸²æŸ“æŠ€æœ¯ï¼Œä½¿å¾— **SuperTextView** å³ä½¿åœ¨å±•ç¤ºè¶…å¤§ **Gif** å›¾åƒçš„åŒæ—¶ï¼Œä¾æ—§èƒ½å¤Ÿç¡®ä¿åº”ç”¨ç•Œé¢ä¸æ»‘çš„æµç•…åº¦ï¼Œä»¥åŠçµæ•çš„å“åº”é€Ÿåº¦ã€‚

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/gif_demo2.gif)

> ğŸ’¡ä»¥ä¸Š Demo ä¸­ï¼Œä½¿ç”¨ **SuperTextView** å±•ç¤ºäº†ä¸€å¼  **è¿‘17M** å¤§å°ï¼ŒåŒ…å«æœ‰ **265** å¸§å›¾åƒçš„ **Gif** å›¾ï¼Œç”¨æˆ·ç•Œé¢å´ä¾æ—§æ— æ¯”æµç•…ã€‚

#### å±•ç¤º Gif è¶…ç®€å•

åœ¨ **SuperTextView** ä¸­å±•ç¤ºä¸€å¼  **Gif** å›¾ï¼Œè¶…ç®€å•ï¼

ä½ å¯ä»¥ç›´æ¥ **XML** å¸ƒå±€æ–‡æ¡£ä¸­é…ç½®ï¼Œæˆ–è€…åœ¨ä»£ç ä¸­è¿›è¡Œæ·»åŠ ã€‚

##### åœ¨ **XML** ä¸­é…ç½® **Gif**

```
<com.coorchice.library.SuperTextView
    android:id="@+id/stv_1"
    android:layout_width="match_parent"
    android:layout_height="150dp"
    app:stv_state_drawable="@drawable/gif_1" />
```

ä½ å¯ä»¥åƒé…ç½®ä¸€å¼ æ™®é€šå›¾ç‰‡ä¸€æ ·ï¼Œä¸º **SuperTextView** é…ç½®å±•ç¤º **Gif** å›¾ã€‚

##### åœ¨ä»£ç ä¸­é…ç½® Gif

```
stv_1 = (SuperTextView) findViewById(R.id.stv_1);
stv_1.setDrawable(R.drawable.gif_1);
```

å°±æ˜¯è¿™ä¹ˆç®€å•ã€è‡ªç„¶ï¼Œ**SuperTextView** å¯ä»¥è®©å¼€å‘è€…æ¯«æ— æ„ŸçŸ¥çš„ï¼Œå°±èƒ½é…ç½®å±•ç¤ºä¸€å¼  **Gif** å›¾ã€‚

åœ¨ **SuperTextView** çš„å†…æ ¸é€»è¾‘ä¸­ï¼Œ**SuperTextView** ä¼šæ™ºèƒ½çš„å¯¹æ™®é€šå›¾å’Œ **Gif** å›¾è¿›è¡Œåˆ†ç±»ï¼Œç„¶åä½œå‡ºç›¸åº”çš„å¤„ç†å’Œä¼˜åŒ–ã€‚

##### å±•ç¤ºç½‘ç»œ **Gif** ä¸€æ ·ç®€å•

å¦‚æœä½ çš„ **Gif** å›¾ä¸åœ¨æœ¬åœ°ï¼Œè€Œåœ¨äº‘ç«¯ï¼Œæ€ä¹ˆåŠï¼Ÿ

ä½ æ— éœ€çƒ¦æ¼ï¼ä¸€åˆ‡æ”¾å¿ƒäº¤ç»™ **SuperTextView**ã€‚

```
stv_1 = (SuperTextView) findViewById(R.id.stv_1);
stv_1.setUrlImage("http://example.com/images/example.gif");
```

åªéœ€ä¸€è¡Œä»£ç ï¼Œ**SuperTextView** ä¼šåœ¨åå°ååŠ©ä½ å®Œæˆ **Gif** å›¾çš„åŠ è½½ï¼Œç„¶åå¤„ç†æ¸²æŸ“åˆ°å±å¹•ä¸Šã€‚

> ğŸ’¡å®é™…ä¸Šï¼Œ**SuperTextView** çš„ **Drawable1** å’Œ **Drawable2** å›¾åƒå±•ç¤ºä½ï¼Œå‡å¯ç”¨æ¥å±•ç¤º **Gif** å›¾ã€‚æ€»ä¹‹ï¼Œä¸€åˆ‡éƒ½æ˜¯ä½ æ‰€ç†Ÿæ‚‰çš„æ ·å­ã€‚


#### ä½ å¯ä»¥æŒæ§çš„æ›´å¤š

**SuperTextView** æ‰€æä¾›ç»™å¼€å‘è€…çš„ä¸ä»…ä»…æ˜¯å±•ç¤º **Gif** å›¾è¿™ä¹ˆç®€å•ï¼Œä½ å¯ä»¥æŒæ§æ›´å¤šçš„ç»†èŠ‚ã€‚

##### æ’­æ”¾/æš‚åœ

ä½ å¯ä»¥éšæ—¶æ§åˆ¶ **Gif** å›¾ï¼Œæ’­æ”¾ï¼Œæˆ–è€…æš‚åœã€‚

```
if (stv.getDrawable() instanceof GifDrawable) {
  // å…ˆè·å–åˆ° GifDrawable å¯¹è±¡
  GifDrawable gifDrawable = (GifDrawable) stv.getDrawable();

  // æ’­æ”¾
  gifDrawable.play();

  // æš‚åœ
  gifDrawable.stop();
}
```

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/gif_demo3.gif)

##### è·³è½¬/è·å–æŒ‡å®šå¸§

åœ¨ **SuperTextView** ä¸­ï¼Œä½ å¯ä»¥éšæ—¶åˆ°è¾¾ä½ æŒ‡å®šçš„å¸§å›¾åƒï¼Œä»¥åŠèƒ½å¤Ÿæå–å¾—åˆ°åˆ°æŒ‡å®šå¸§çš„å›¾åƒã€‚

```
if (stv.getDrawable() instanceof GifDrawable) {
  // å…ˆè·å–åˆ° GifDrawable å¯¹è±¡
  GifDrawable gifDrawable = (GifDrawable) stv.getDrawable();

  // è·³è½¬åˆ°æŒ‡å®šå¸§
  gifDrawable.gotoFrame(pre);

  // è·å–æŒ‡å®šå¸§
  Bitmap frame = gifDrawable.getFrame(i);
}
```
> ğŸ’¡ç”±äº **SuperTextView** èƒ½å¤Ÿæ”¯æŒå±€éƒ¨å¢é‡æ¸²æŸ“ï¼Œæ‰€ä»¥å½“ä½ çš„ **Gif** æ”¯æŒè¿™ç§æ¸²æŸ“æ¨¡å¼æ—¶ï¼Œæ„å‘³ç€ä½ å¯èƒ½éœ€è¦é€šè¿‡è°ƒç”¨ `gifDrawable.setStrict(true)` å¼€å¯ **ä¸¥æ ¼æ¨¡å¼**ï¼Œæ¥ç¡®ä¿å¸§è·³è½¬æˆ–è€…å¸§æå–çš„å›¾åƒæ˜¯æ­£ç¡®çš„ã€‚è¿™å¯èƒ½ä¼šèŠ±è´¹ä¸€äº›æ—¶é—´ï¼Œæ‰€ä»¥ä½ åº”è¯¥å°½é‡å°† **ä¸¥æ ¼æ¨¡å¼** ä¸‹çš„æ“ä½œåœ¨å¼‚æ­¥çº¿ç¨‹ä¸­è¿›è¡Œã€‚

##### å¿«æ…¢ï¼Œéšä½ å¿ƒ

**SuperTextView** å…è®¸ä½ éšæ„çš„ä¿®æ”¹ **Gif** å›¾çš„æ’­æ”¾é€Ÿç‡ã€‚

```
if (stv.getDrawable() instanceof GifDrawable) {
  // å…ˆè·å–åˆ° GifDrawable å¯¹è±¡
  GifDrawable gifDrawable = (GifDrawable) stv.getDrawable();

  // è®¾ç½®å¸§æ’­æ”¾é—´éš”æ—¶é—´ï¼Œ20ms
  gifDrawable.setFrameDuration(20);
}
```

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/gif_demo4.gif)

##### ä½ å¯ä»¥äº†è‹¥æŒ‡æŒ

é€šè¿‡ **SuperTextView** ä½ å¯ä»¥å¯¹ä¸€å¼  **Gif** å›¾åƒçš„ä¿¡æ¯äº†è‹¥æŒ‡æŒã€‚

- è·å– **Gif** å°ºå¯¸

    ```
    // è·å–å®½åº¦
    int width = gifDrawable.getWidth();

    // è·å–é«˜åº¦
    int height = gifDrawable.getHeight();
    ```

- è·å– **Gif** å¸§ä¿¡æ¯

    ```
    // è·å–å¸§æ•°
    int frameCount = gifDrawable.getFrameCount();

    // è·å–å½“å‰å¸§é—´éš”
    int frameDuration = gifDrawable.getFrameDuration();

    // è·å–å½“å‰æ¸²æŸ“åˆ°é‚£ä¸€å¸§
    int framePotision = gifDrawable.getCurrentFrame();

    // æ˜¯å¦åœ¨æ’­æ”¾
    boolean isPlaying = gifDrawable.isPlaying();
    ```

#### æ›´å‡ºå½©çš„ Gif

**SuperTextView** å‡­å€Ÿå¯¹ **Gif** æ¸²æŸ“çš„æ— ç¼èåˆï¼Œæ­¤å‰ **Drawable1** å’Œ **Drawable2** çš„ä¸€åˆ‡é…ç½®é¡¹ï¼Œåœ¨å±•ç¤º **Gif** å›¾æ—¶ï¼Œä¹ŸåŒæ ·èƒ½å¤Ÿç”Ÿæ•ˆã€‚

##### Gif ä½œä¸ºæ™®é€š Drawable
    app:stv_state_drawable_rotate="90"

æ¥çœ‹çœ‹åœ¨åŸæœ¬çš„ **Drawable** ä½ç½®æ”¾ä¸Šä¸€å¼  **Gif** å›¾ä¼šå‘ç”Ÿä»€ä¹ˆç¥å¥‡çš„äº‹æƒ…ã€‚

```
<com.coorchice.library.SuperTextView
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:paddingLeft="62dp"
    android:paddingRight="10dp"
    android:text="å°ç«ç®­å‘å°„äº†ï¼å•¦å•¦å•¦å•¦å•¦å•¦..."
    android:textColor="#ffffff"
    android:textSize="22dp"
    app:stv_corner="6dp"
    app:stv_isShowState="true"
    app:stv_solid="#0D1831"

    // è®¾ç½® Gif
    app:stv_state_drawable="@drawable/gif_1"

    // è®¾ç½® Gif é«˜
    app:stv_state_drawable_height="40dp"

    // è®¾ç½® Gif å®½
    app:stv_state_drawable_width="40dp"

    // è®¾ç½® Gif å±…å·¦å±•ç¤º
    app:stv_state_drawable_mode="left"

    // è®¾ç½® Gif å·¦é—´è·
    app:stv_state_drawable_padding_left="10dp"/>
```

æ•ˆæœæ˜¯...

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/gif_demo5.gif)


ç°åœ¨ï¼Œæˆ‘ä»¬å°† **Gif** æ—‹è½¬ 90 åº¦è¯•è¯•ã€‚

```
<com.coorchice.library.SuperTextView
    ...
    // è®¾ç½® Gif æ—‹è½¬ 90 åº¦
    app:stv_state_drawable_rotate="90"
    ...
/>
```

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/gif_demo6.gif)


##### å°† Gif åœ†è§’åŒ–

**SuperTextView** ä¸å¯æ€è®®çš„å®ç°äº† **Gif** å›¾çš„åœ†è§’åŒ–ï¼Œä¸ºå¼€å‘è€…æ‰“å¼€äº†ä¸€æ‰‡å…¨æ–°çš„å¤§é—¨ã€‚


![](https://raw.githubusercontent.com/chenBingX/img/master/stv/gif_demo7.gif)


ç„¶è€Œï¼Œè¿™ç§æ•ˆæœçš„å´æ˜¯æƒŠäººçš„ç®€å•ã€‚

```
<com.coorchice.library.SuperTextView
    android:layout_width="185dp"
    android:layout_height="138.75dp"
    android:layout_gravity="center_horizontal"
    app:stv_corner="20dp"

    // è®¾ç½® Gif ä½œä¸ºæ§ä»¶èƒŒæ™¯
    app:stv_drawableAsBackground="true"

    app:stv_scaleType="fitCenter"

    // é…ç½® Gif
    app:stv_state_drawable="@drawable/gif_1" />
```

##### ä¸º Gif åŠ ä¸Šè¾¹æ¡†

å¼€å‘è€…ç”šè‡³å¯ä»¥è½»è€Œæ˜“ä¸¾çš„ç»™ä¸€å¼  **Gif** å›¾åŠ ä¸Šè¾¹æ¡†ã€‚

```
<com.coorchice.library.SuperTextView
    android:layout_width="350dp"
    android:layout_height="148.4dp"
    android:layout_gravity="center_horizontal"
    android:gravity="center"

    // åŠ ä¸Šæ–‡å­—ä¼šæ˜¾çš„æ›´æœ‰æ ¼è°ƒ
    android:text="SuperTextView"

    android:textSize="36dp"
    android:textStyle="bold"
    android:visibility="invisible"
    app:stv_corner="6dp"
    app:stv_drawableAsBackground="true"
    app:stv_isShowState="true"
    app:stv_scaleType="center"
    // è®¾ç½®è¾¹æ¡†é¢œè‰²
    app:stv_stroke_color="@color/opacity_8_gray_4c

    // è®¾ç½®è¾¹æ¡†å®½åº¦
    app:stv_stroke_width="5dp"

    app:stv_text_fill_color="#ccffffff"
    app:stv_text_stroke="true"
    app:stv_text_stroke_color="#cc000000"
    app:stv_text_stroke_width="2dp"

    // é…ç½® Gif
    app:stv_state_drawable="@drawable/gif_1"/>
```

æ•ˆæœå³åˆ»å‘ˆç°...


![](https://raw.githubusercontent.com/chenBingX/img/master/stv/gif_demo8.gif)


##### è½»æ¾å®ç°åŠ¨æ€å¤´åƒ

åœ¨è¿‡å»ï¼Œä¸€äº›ç‚«é…·çš„åŠ¨æ•ˆï¼Œå¾€å¾€ä¼šæ­¢æ­¥äºå®ç°çš„å¤æ‚å’Œæˆæœ¬ä¸Šã€‚è€Œ **SuperTextView** ä¸ºä½ å¸¦äº†æ›´å¤šçš„å¯èƒ½ï¼Œä½ çš„çµæ„Ÿå¯ä»¥æ— æ‹˜æ— æŸã€‚

æ¯”å¦‚ï¼ŒåŠ¨æ€å¤´åƒçš„å®ç°ï¼Œä¼šæ¯”ä»¥å¾€æ›´åŠ çš„ç®€å•ã€‚

```
<com.coorchice.library.SuperTextView
    android:layout_width="80dp"
    android:layout_height="80dp"
    android:layout_marginLeft="30dp"
    app:stv_corner="40dp"

    // è®¾ç½®ä¸ºèƒŒæ™¯å›¾
    app:stv_drawableAsBackground="true"

    // é…ç½® Gif å¤´åƒ
    app:stv_state_drawable="@drawable/gif_avatar"

    // æ·»åŠ è¾¹æ¡†
    app:stv_stroke_color="#ffffff"
    app:stv_stroke_width="3dp"
    />
```

åœ¨ä»£ç ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥é…ç½®ä¸€å¼ ç½‘ç»œåŠ¨æ€å¤´åƒã€‚

```
stv.setUrlImage("http://gif_avatar.gif");
```

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/gif_demo9.gif)

### æ›´å¤šçš„æƒŠå–œ

#### ä¸¤ä¸ª Drawable éƒ½æ”¯æŒç‚¹å‡»ï¼

åœ¨æ–°ç‰ˆæœ¬çš„ **SuperTextView** ä¸­ï¼Œ**Drawable1** å’Œ **Drawable2** è¢«èµ‹äºˆäº†å…¨æ–°çš„èƒ½åŠ› â€”â€” æ”¯æŒç²¾ç¡®ç‚¹å‡»åŠ¨ä½œã€‚

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/gif_demo10.gif)

**SuperTextView** é€šè¿‡ç›‘æ§ç‚¹å‡»åŠ¨ä½œå‘ç”Ÿçš„ä½ç½®ï¼Œèƒ½å¤Ÿå°†ç‚¹å‡»åŠ¨ä½œå‡†ç¡®çš„å®šä½åˆ°æ‰€å‘ç”Ÿçš„åŒºåŸŸä¸­ï¼ˆ**Drawable1**ã€**Drawable2** æˆ–è€… **å…¶å®ƒåŒºåŸŸ**ï¼‰ï¼Œç„¶åè§¦å‘ç›¸åº”çš„ç›‘å¬å›è°ƒã€‚

ä½ å¯ä»¥ä¸º **SuperTextView** è®¾ç½® **Drawable** ä¸Šçš„ç‚¹å‡»åŠ¨ä½œç›‘å¬å™¨ï¼Œä»¥ä¾¿åœ¨åŠ¨ä½œå‘ç”Ÿæ—¶ï¼Œä½œå‡ºå‡†ç¡®çš„å“åº”ã€‚

```
stv.setOnDrawableClickedListener(new SuperTextView.OnDrawableClickedListener() {
    @Override
    public void onDrawable1Clicked(SuperTextView stv) {
        // Drawable1 clickedï¼Œdo something...
    }
    @Override
    public void onDrawable2Clicked(SuperTextView stv) {
        // Drawable2 clickedï¼Œdo something...
    }
});

stv.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        // é Drawable åŒºåŸŸè¢«ç‚¹å‡»ï¼Œdo something...
    }
});
```

#### èƒŒæ™¯å›¾ç¼©æ”¾æ¨¡å¼æ”¯æŒ

ç°åœ¨ï¼Œå½“ä½ å°† **Drawable1** ä½œä¸ºèƒŒæ™¯å›¾æ—¶ï¼Œä½ å¯ä»¥ä¸ºå®ƒé…ç½®ä¸åŒçš„ç¼©æ”¾æ¨¡å¼ï¼Œä»¥è¾¾åˆ°ä½ å¿ƒä»ªçš„æ•ˆæœã€‚

```
stv.setScaleType(ScaleType.CENTER);
```

**SuperTextView** ä¸ºå¼€å‘è€…æä¾›äº†å¤šè¾¾ 3 ç§çš„ç¼©æ”¾æ¨¡å¼ï¼š

- `ScaleType.FIT_XY`

    å°†å›¾ç‰‡æ‹‰ä¼¸å¹³é“ºã€‚

- `ScaleType.FIT_CENTER`

    å°†å›¾ç‰‡å‰ªè£å±…ä¸­ã€‚

- `ScaleType.CENTER`

    å°†å›¾ç‰‡è‡ªé€‚åº”å±…ä¸­ã€‚é»˜è®¤å€¼ã€‚


![](https://raw.githubusercontent.com/chenBingX/img/master/stv/stv_scaletype.png)


#### å…¶å®ƒæ›´æ–°

- åœ¨ **XML** å¸ƒå±€æ–‡æ¡£ä¸­ï¼Œ**Drawable1** å’Œ **Drawable2** ç°åœ¨æ”¯æŒç›´æ¥è®¾ç½® **é¢œè‰²** æˆ–è€… **ShapeDrawable**ã€‚

    ```
    // circle_f9ad36 ä¸º xml ä¸­ç¼–å†™çš„ shape æ–‡ä»¶
    app:stv_state_drawable="@drawable/circle_f9ad36"

    // ä½¿ç”¨çº¯è‰²ä½œä¸º Drawable
    app:stv_state_drawable="#000000"
    ```

- âš ï¸ æœ€ä½æ”¯æŒç‰ˆæœ¬ **API** æå‡åˆ° **19**ã€‚

- æ¸²æŸ“æ€§èƒ½æ¯”è¿‡å»æå‡è‡³å°‘ **30%**ã€‚

- å‡çº§é»˜è®¤å›¾ç‰‡åŠ è½½å¼•æ“ï¼Œæ”¯æŒæ™ºèƒ½ç¼“å­˜ã€‚ä¹Ÿè®¸ç°åœ¨ï¼Œä½ ä¸å¿…å†å¼•å…¥ç¬¬ä¸‰æ–¹å›¾ç‰‡åŠ è½½åº“äº†ã€‚

## v3.1.1 - è¯šæ„ä¹‹ä½œï¼ŒSuperTextView

SuperTextView è¢«æ‰“é€ æ¥å¸®åŠ© Android å¼€å‘è€…æ›´é«˜æ•ˆã€æ›´ä¾¿æ·ã€æ›´ä¼˜é›…çš„å¼€å‘ Android åº”ç”¨ã€‚

ç°åœ¨ï¼Œè¿™ä¸€è¯šæ„ä¹‹ä½œå†æ¬¡å‡çº§ã€‚å…¨æ–°çš„ SuperTextView å°†å‘ Android å¼€å‘è€…å¼€æ”¾æ›´å¤šå¯èƒ½æ€§ï¼Œå½“ç„¶ä¸€å¦‚æ—¢å¾€ï¼ŒSuperTextView ä¹Ÿå¸¦æ¥äº†æ›´å¤šé«˜æ•ˆçš„åŠŸèƒ½ã€‚

### 1 ç¥å¥‡çš„ç€è‰²

![image](https://raw.githubusercontent.com/chenBingX/img/master/stv/ç€è‰².png)

SuperTextView æ­¤æ¬¡çš„å‡çº§ï¼Œä¸º StateDrawable å¢åŠ äº†ç¥å¥‡è€Œå¼ºå¤§çš„ç€è‰²èƒ½åŠ›ã€‚å¼€å‘è€…å¯ä»¥è½»æ¾çš„æ”¹å˜ä¸€ä¸ªå›¾æ ‡çš„é¢œè‰²ï¼Œè€Œä¸ç”¨å†å¢åŠ ä¸€ä¸ªä»…ä»…æ˜¯é¢œè‰²ä¸åŒçš„å›¾æ ‡åˆ°é¡¹ç›®ä¸­ã€‚è¿™é¡¹æŠ€æœ¯å°†ä¸ºä½ çš„ Android åº”ç”¨ç¨‹åºå¸¦æ¥ä¸€æ¬¡ç˜¦èº«çš„æœºé‡ã€‚

```
# ä¿®æ”¹ drawable çš„é¢œè‰²
app:stv_state_drawable_tint="@color/gray"

# ä¿®æ”¹ drawable2 çš„é¢œè‰²
app:stv_state_drawable2_tint="@color/red"
```

åªéœ€è¦å¦‚æ­¤ä¸€è¡Œç®€å•çš„ä»£ç ï¼Œå°±èƒ½ç¬é—´èµ‹äºˆä¸€å¼ å›¾ç‰‡åƒå˜ä¸‡åŒ–çš„èƒ½åŠ›ã€‚æƒ³è¦ä»»ä½•è‰²å½©ï¼Œå½“ç„¶æ˜¯ä½ è¯´äº†ç®—ã€‚è€Œè¿™ä¸€åˆ‡çš„å‘ç”Ÿï¼Œæ— éœ€å†å¼•è¿›å¦å¤–ä¸€å¼ å›¾ç‰‡ã€‚

åœ¨ Java ä»£ç ä¸­ï¼Œæœ‰ä¸ä¹‹å¯¹åº” set/get å‡½æ•°ï¼Œè®©å¼€å‘è€…å¯ä»¥åœ¨ä»»ä½•æ—¶å€™éƒ½èƒ½æ–½å±•é­”æ³•ï¼Œæ”¹å˜ä¸€å¼ å›¾ç‰‡çš„è‰²å½©ã€‚

### 2 ä¸ƒåäºŒèˆ¬å˜åŒ–

å¯¹ StateDrawable çš„å¢å¼ºï¼Œä¸ä»…ä»…é™äºé¢œè‰²çš„å˜æ¢ã€‚SuperTextView æ›´è¢«èµ‹äºˆäº†æ”¹å˜ StateDrawable å½¢æ€çš„èƒ½åŠ›ã€‚åŒæ ·çš„ä¸€å¼ å›¾ï¼Œå¼€å‘è€…å¯ä»¥ç»„åˆå‡ºæ— æ•°ç§å¯èƒ½ã€‚

![image](https://raw.githubusercontent.com/chenBingX/img/master/stv/æ—‹è½¬.png)

åªéœ€ç®€å•çš„å‡ è¡Œä»£ç ï¼Œä½ ä¾¿å¯ä»¥éšå¿ƒæ‰€æ¬²çš„å˜æ¢ä»»ä½•ä¸€å¼ å›¾ç‰‡ã€‚

```
# ä¿®æ”¹ drawable çš„æ—‹è½¬è§’åº¦
app:stv_state_drawable_rotate="90"

# ä¿®æ”¹ drawable2 çš„æ—‹è½¬è§’åº¦
app:stv_state_drawable2_rotate="90"
```

æ— éœ€å¤æ‚çš„ä»£ç ï¼ŒSuperTextView ä¸€å¦‚æ—¢å¾€çš„ç®€æ´ã€ä¼˜é›…ã€‚

åŒæ ·ï¼Œåœ¨ Java ä»£ç ä¸­ï¼Œä¹Ÿæä¾›äº†å¯¹åº”çš„ set/get å‡½æ•°ã€‚

è¿™é¡¹èƒ½åŠ›ï¼Œå¯ä»¥æœ‰æ•ˆçš„å¸®åŠ©å¼€å‘è€…å°† Android åº”ç”¨çš„ä½“ç§¯å‘ç€æè‡´çš„æ–¹å‘å‹ç¼©ã€‚


### 3 ç²¾å½©è¿œä¸æ­¢äºæ­¤

![image](https://raw.githubusercontent.com/chenBingX/img/master/stv/æ–‡å­—æ¸å˜è‰².png)

è¿™ï¼Œå°±æ˜¯æ¸å˜æ–‡å­—ï¼

SuperTextView æ‰€æä¾›çš„å¯èƒ½æ˜¯ç›®å‰ä¸ºæ­¢å®ç°æ¸å˜æ–‡å­—æœ€ç®€æ´ã€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚åªéœ€è¦ç®€å•çš„é…ç½®ï¼Œå°±èƒ½å®ç°é…·ç‚«çš„æ¸å˜æ–‡å­—æ•ˆæœã€‚

```
# æ˜¯å¦å¯ç”¨æ¸å˜è‰²æ–‡å­—
app:stv_textShaderEnable="true"

# è®¾ç½®æ–‡å­—çš„èµ·å§‹æ¸å˜è‰²
app:stv_textShaderStartColor="@color/red"

# è®¾ç½®æ–‡å­—çš„ç»“æŸæ¸å˜è‰²
app:stv_textShaderEndColor="@color/yellow"

# è®¾ç½®æ–‡å­—çš„æ¸å˜çš„æ¨¡å¼
# leftToRightï¼šå·¦ -> å³
# rightToLeftï¼šå³ -> å·¦
# topToBottomï¼šä¸Š -> ä¸‹
# bottomToTopï¼šä¸‹ -> ä¸Š
app:stv_textShaderMode="leftToRight"
```

è¿™äº›å±æ€§ä¹Ÿåœ¨ Java ä¸­å¼€æ”¾äº† set/get æ¥å£ï¼Œä¾¿äºå¼€å‘è€…éšæ—¶åŠ¨æ€çš„ä¿®æ”¹å®ƒä»¬ã€‚


### 4 å¼€æ”¾äº†æ–°çš„ API

#### 4.1 Adjuster å¢åŠ  onAttachã€onDetach

Adjuster å¢åŠ äº†ä¸¤ä¸ªæ–°çš„å‡½æ•°ï¼š

- `onAttach()`ï¼šå½“ Adjuster è¢«è®¾ç½®åˆ°ä¸€ä¸ª SuperTextView ä¸­æ—¶ä¼šè¢«è°ƒç”¨ã€‚
- `onDetach()`ï¼šå½“ Adjuster è¢«ä»ä¸€ä¸ª SuperTextView ä¸­ç§»é™¤æ—¶ä¼šè¢«è°ƒç”¨ã€‚

é€šè¿‡åœ¨ Adjuster ä¸­é‡å†™è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå¼€å‘è€…å¯ä»¥åœ¨æ­£ç¡®çš„æ—¶æœºè¿›è¡ŒçŠ¶æ€æ³¨å†Œã€åˆå§‹åŒ–ï¼Œæˆ–è€…å–æ¶ˆæ³¨å†Œã€é‡Šæ”¾èµ„æºç­‰æ“ä½œã€‚

```
public class MyAdjuster extends SuperTextView.Adjuster{

    @Override
    protected void adjust(SuperTextView superTextView, Canvas canvas) {

    }

    @Override
    public void onAttach(SuperTextView stv) {
      // å½“ Adjuster è¢«åŠ å…¥ä¸€ä¸ª SuperTextView æ—¶ä¼šè¢«è°ƒç”¨
    }

    @Override
    public void onDetach(SuperTextView stv) {
      // å½“ Adjuster è¢«ä» SuperTextView ç§»é™¤æ—¶ä¼šè¢«è°ƒç”¨
    }
}
```

#### 4.2 æä¾› getAdjusterList() å‡½æ•°

è¿™ä¸ªå‡½æ•°å¯ä»¥è®©å¼€å‘è€…è·å¾—ä¸€ä¸ª SuperTextView ä¸­çš„æ‰€æœ‰ Adjusterã€‚å¦‚æœ SuperTextView ä¸­æ²¡æœ‰ Adjuster çš„è¯ï¼Œå°†ä¼šè¿”å› nullã€‚

### 5âš ï¸ ä½ å¿…é¡»é‡è§†è¿™äº›å˜åŒ–

#### 5.1 å±æ€§å¢åŠ äº† stv_ å‰ç¼€

ç°åœ¨ï¼ŒSuperTextView çš„æ‰€æœ‰å±æ€§éƒ½åŠ ä¸Šäº†å‰ç¼€ `stv_`ã€‚

è¿™æ ·åšå¯ä»¥é¿å…å½“å¼€å‘è€…å¼•å…¥çš„å…¶å®ƒç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œä¸ SuperTextView å¯èƒ½äº§ç”Ÿçš„å±æ€§åå†²çªã€‚

å¦‚æœå¼€å‘è€…ç›®å‰æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªæ­¤å‰ç‰ˆæœ¬çš„ SuperTextViewï¼Œé‚£ä¹ˆå½“å‡çº§åˆ°æ–°çš„ç‰ˆæœ¬åï¼Œéœ€è¦åœ¨æ‰€æœ‰ xml ä¸­çš„å±æ€§å‰åŠ ä¸Š `stv_` å‰ç¼€ã€‚

å¾—ç›Šäºç°ä»£ IDE çš„å¼ºå¤§ï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾çš„å®Œæˆè¿™äº›å·¥ä½œã€‚å°±åƒä¸‹é¢è¿™æ ·ã€‚

```
app:corner="10dp"
```

corner æ˜¯æ—§ç‰ˆæœ¬ä¸­çš„å±æ€§åç§°ï¼Œå‡çº§åˆ°æ–°ç‰ˆæœ¬åï¼Œéœ€è¦åœ¨å‰é¢å¢åŠ  `stv_` å‰ç¼€ï¼Œå˜ä¸º `stv_corner`ã€‚

![image](https://raw.githubusercontent.com/chenBingX/img/master/stv/replace.png)

å¦‚æœå¼€å‘è€…ä½¿ç”¨çš„æ˜¯ AndroidStudioï¼Œä» `Edit > Find > Replace` æ‰“å¼€æ‰¹é‡æ›¿æ¢å¯¹è¯æ¡†ï¼Œç„¶åæŒ‰ç…§ä¸‹å›¾æ“ä½œå³å¯ã€‚

![image](https://raw.githubusercontent.com/chenBingX/img/master/stv/å±æ€§æ›¿æ¢.png)

å¦‚æœå¼€å‘è€…çš„é¡¹ç›®ä¸­åªæœ‰ SuperTextView ä½¿ç”¨äº†ç›¸åŒçš„å‘½åç©ºé—´ï¼ˆå¦‚ `app`ï¼‰ï¼Œé‚£ä¹ˆå¾ˆå¹¸è¿ï¼Œä½ å¯ä»¥ç›´æ¥å°† `app:` æ›¿æ¢ä¸º `app:stv_` å³å¯ã€‚

#### 5.2 setAdjuster(Adjuster) å·²è¢«ç§»é™¤

ä» SuperTextView v2.0 ç‰ˆæœ¬å¼€å§‹ï¼Œ`setAdjuster(Adjuster)` å‡½æ•°å°±è¢«æ ‡è®°ä¸ºäº†å°†è¢«ç§»é™¤çš„çŠ¶æ€ï¼ŒåŒæ—¶åŠ å…¥äº†æ–°çš„å‡½æ•° `addAdjuster(Adjuster)` ä½œä¸ºæ›¿ä»£ã€‚

åœ¨æ–°çš„ç‰ˆæœ¬ä¸­ï¼Œ`setAdjuster(Adjuster)` å‡½æ•°å°†è¢«æ­£å¼ç§»é™¤ï¼Œå¦‚æœå¼€å‘è€…æ­¤å‰ä½¿ç”¨äº†è¯¥æ–¹æ³•ï¼Œè¯·å°†å…¶ä¿®æ”¹ä¸º `addAdjuster(Adjuster)`ã€‚




### 6 å¦‚ä½•å¼€å§‹ SuperTextView v3.1.1
```
dependencies {
	 compile 'com.github.chenBingX:SuperTextView:v3.1.1'
}
```



## v3.0 - ä½ æœŸå¾…å·²ä¹…çš„SuperTextView
ç»è¿‡ä¸€å¹´å¤šçš„ä¸æ–­çš„è†å¬ã€æ€è€ƒã€æ¢ç´¢ã€éªŒè¯ï¼Œ **SuperTextView** å®Œæˆäº†å¤šæ¬¡è¿­ä»£ï¼Œæ”¹å–„äº†ä¸€äº›é—®é¢˜ï¼Œæ–°å¢äº†ä¸€äº›åŠŸèƒ½ï¼Œä¸æ–­çš„å®Œå–„ï¼Œä»¥å¸¦ç»™å¼€å‘è€…æ›´å¥½çš„å¼€å‘ä½“éªŒã€‚

å¦‚ä»Šï¼Œ **SuperTextView** å·²ç»å…·å¤‡äº†è¯¸å¦‚åœ†è§’ã€è¾¹æ¡†ã€æè¾¹ã€æŒ‰å‹å˜è‰²ã€å¤šçŠ¶æ€å›¾ã€åœ†è§’å›¾ã€ä¸‡èƒ½çš„ **Adjuster** ã€åŠ è½½ç½‘ç»œå›¾ç‰‡ç­‰ä¸€ç³»åˆ—çš„å¸¸ç”¨åŠŸèƒ½ã€‚å¾—ç›Šäºæ­¤ï¼Œå¼€å‘è€…èƒ½å¤Ÿè½»æ¾å®ç°å„ç§åŸæœ¬ååˆ†éº»çƒ¦çš„æ•ˆæœï¼ŒèŠ‚çœå¤§é‡çš„å¼€å‘æ—¶é—´ï¼Œæœ‰æ•ˆå‡å°‘é¡µé¢çš„å¤æ‚åº¦ï¼Œé™ä½é¡¹ç›®ç»´æŠ¤æˆæœ¬ã€‚

å†™ä»£ç ï¼Œæœ¬åº”å¦‚æ­¤æ„‰æ‚¦ï¼

### 1. é“¾æ¥äº‘ç«¯çš„SuperTextView

æ—©åœ¨å‡ ä¸ªæœˆå‰ï¼Œå°±å¼€å§‹æœ‰å¾ˆå¤šå¼€å‘è€…å‘ **CoorChice** å»ºè®®ï¼Œæ˜¯å¦èƒ½å¤Ÿè®© **SuperTextView** å…·å¤‡åŠ è½½ç½‘ç»œå›¾ç‰‡çš„åŠŸèƒ½ã€‚å…¶å®è¿™ä¹Ÿæ˜¯ **CoorChice** å¾ˆä¹…ä¹‹å‰å°±æœ‰è€ƒè™‘è¿‡çš„ï¼Œä½†åœ¨ **SuperTextView** çš„æ—©æœŸï¼Œå®Œå–„å…¶æ ¸å¿ƒåŠŸèƒ½ä»ç„¶æ˜¯é¦–è¦ç›®æ ‡ï¼Œæ‰€ä»¥ä¸€ç›´æ²¡æ¶‰çŒåˆ°å›¾ç‰‡ç›¸å…³çš„åŠŸèƒ½ã€‚

ç›´åˆ°ä¸Šä¸€ä¸ªå¤§ç‰ˆæœ¬ï¼Œ**SuperTextView v2.0**ï¼Œ**CoorChie** æ‰å°è¯•æ·»åŠ äº†å›¾ç‰‡å±•ç¤ºçš„åŠŸèƒ½ã€‚è¿™ä½¿å¾—**SuperTextView** å¯ä½¿ç”¨çš„èŒƒå›´å¾—åˆ°äº†æ‰©å¤§ï¼ŒåŒæ—¶é’ˆå¯¹å›¾ç‰‡ä¹Ÿæ¨å‡ºäº†ç»™å›¾ç‰‡å¢åŠ æè¾¹ã€è®¾ç½®åœ†è§’ã€è®¾ç½®çŠ¶æ€å›¾ç­‰åŠŸèƒ½ã€‚ç›¸å…³ä½¿ç”¨æ–‡æ¡£å¯åˆ°ä»¥ä¸‹é“¾æ¥æŸ¥é˜…ï¼š

[ã€ä½ å¥½ï¼Œ SuperTextViewã€‘ - https://www.jianshu.com/p/1b91e11e441d](https://www.jianshu.com/p/1b91e11e441d)

è¿™ä¸€æ¬¡å°è¯•ï¼Œè·å¾—äº†å¼€å‘è€…ä»¬ä¸é”™çš„åå“ï¼Œå¤§å®¶å¯¹äºä½¿ç”¨ **SuperTextView** å»å±•ç¤ºå¤„ç†å›¾ç‰‡æ˜¯æœ‰æ‰€æœŸå¾…çš„ã€‚ä¸Šä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒåï¼Œå¼€å‘è€…ä»¬å¯¹äºä¸€ä¸ªèƒ½å±•ç¤ºç½‘ç»œå›¾ç‰‡çš„ **SuperTextView** ä¼¼ä¹æ›´åŠ çš„æ„Ÿå…´è¶£äº†ã€‚

é‚£ä¹ˆï¼Œç°åœ¨ï¼Œä½ æ‰€æœŸå¾…å·²ä¹…çš„ **SuperTextView** åœ¨æ­¤ï¼

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/å›¾ç‰‡ä¸‹è½½æ¼”ç¤º2.gif)

#### 1.1 åŠ è½½ä¸€å¼ ç½‘ç»œå›¾ç‰‡
æ˜¾ç¤ºä¸€å¼ ç½‘ç»œå›¾ç‰‡ï¼Œåœ¨ **SuperTextView** ä¸­åªéœ€è¦å¦‚ä¸‹ä»£ç ï¼š

```
SuperTextView stv_1 = (SuperTextView) findViewById(R.id.stv_1);
//å¡«å…¥å›¾ç‰‡Url
stv_1.setUrlImage(url);
```

æ•ˆæœå°±å¦‚ä¸Šå›¾ä¸­çš„ç¬¬äºŒä¸ªæ˜¾ç¤ºå¤´åƒçš„ä¾‹å­ä¸€æ ·ã€‚

å¦‚æœä½ å¸Œæœ›å°†ç½‘ç»œå›¾ç‰‡ä½œä¸º **SuperTextView** çš„ StateDrawable æ¥å±•ç¤ºçš„è¯ï¼Œå®Œå…¨æ²¡é—®é¢˜ã€‚

```
//å¡«å…¥å›¾ç‰‡Url
stv_1.setUrlImage(url, false);
```

ç¬¬äºŒä¸ªå‚æ•°ä¸º **false** è¡¨ç¤ºç½‘ç»œå›¾ç‰‡å°†ä¸ä¼šè¢«ä½œä¸ºèƒŒæ™¯å……æ»¡æ•´ä¸ª **SuperTextView**ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªçŠ¶æ€å›¾ã€‚å½“ç„¶ï¼Œæœ‰å…³çŠ¶æ€å›¾çš„ä¸€åˆ‡é…ç½®éƒ½å°†è¿ç”¨åˆ°æ­¤ã€‚å°±åƒä¸Šå›¾ä¸­çš„ç¬¬ä¸€ä¸ªä¾‹å­ä¸€æ ·ï¼Œæ•´ä¸ªå¸ƒå±€åŒ…æ‹¬å›¾ç‰‡ã€æ–‡å­—ã€èƒŒæ™¯éƒ½åœ¨ä¸€ä¸ª **SuperTextView** ä¸­è¢«å¤„ç†ï¼Œä»ç½‘ç»œä¸‹è½½çš„å›¾ç‰‡è¢«ä½œä¸º **StateDrawable** æ”¾åˆ°äº†å›¾ä¸­çš„ä½ç½®ã€‚

#### 1.2 SuperTextViewä¸­å›¾ç‰‡å¼•æ“
**SuperTextView** ä¸ºäº†ä¿æŒä¾èµ–åº“çš„çº¯å‡€å’Œå°½å¯èƒ½å°çš„ä½“ç§¯ï¼Œå¹¶æ²¡æœ‰å†…ç½®ä»»ä½•çš„å›¾ç‰‡åŠ è½½æ¡†æ¶ã€‚æ‰€ä»¥é»˜è®¤æƒ…å†µï¼Œå°†ä½¿ç”¨å†…ç½®çš„ä¸€ä¸ªç®€æ˜“å›¾ç‰‡å¼•æ“å»ä¸‹è½½å›¾ç‰‡ï¼Œç¡®ä¿å¼€å‘è€…èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨å±•ç¤ºç½‘ç»œå›¾ç‰‡çš„åŠŸèƒ½ã€‚

ä½† **CoorChice** ä»ç„¶å»ºè®®å¼€å‘è€…æ ¹æ®é¡¹ç›®çš„å…·ä½“æƒ…å†µï¼Œé€‰æ‹©ä¸€ä¸ªç›®å‰æ­£åœ¨ä½¿ç”¨çš„å›¾ç‰‡åŠ è½½æ¡†æ¶ï¼Œè®¾ç½®åˆ° **SuperTextView** ä¸­ï¼Œä»¥ç”¨æ¥åŠ è½½å›¾ç‰‡ã€‚ **SuperTextView** å…·å¤‡é€‚é…ä»»æ„å›¾ç‰‡åŠ è½½æ¡†æ¶çš„èƒ½åŠ›ã€‚ä¸‹é¢ **CoorChice** å°†é€šè¿‡ Glide å’Œ Picasso çš„ä¾‹å­å±•ç¤ºå¦‚ä½•å°†ç°æœ‰çš„å›¾ç‰‡æ¡†æ¶å®‰è£…åˆ° **SuperTextView** ä¸­ã€‚

##### 1.2.1 å®ç°å›¾ç‰‡å¼•æ“Engine
åœ¨ **SuperTextView** ä¸­ï¼Œæ ¸å¿ƒçš„å›¾ç‰‡åŠ è½½å¼•æ“è¢«æŠ½è±¡æˆæ¥å£ **Engine** ï¼Œå¼€å‘è€…éœ€è¦æ ¹æ®æ‰€ç”¨çš„å›¾ç‰‡æ¡†æ¶ï¼Œå®ç°ä¸€ä¸ª **Engine**ã€‚

- **Glideå›¾ç‰‡åŠ è½½æ¡†æ¶**

```
public class GlideEngine implements Engine {

  private Context context;

  public GlideEngine(Context context) {
        this.context = context;
  }

  @Override
  public void load(String url, final ImageEngine.Callback callback) {
        Glide.with(context).load(url).into(new SimpleTarget<GlideDrawable>() {
        @Override
        public void onResourceReady(GlideDrawable resource, GlideAnimation<? super GlideDrawable> glideAnimation) {
            // ä¸»è¦æ˜¯é€šè¿‡callbackè¿”å›Drawableå¯¹è±¡ç»™SuperTextView
            callback.onCompleted(resource);
        }
        });
    }
}
```

- **Picassoå›¾ç‰‡åŠ è½½æ¡†æ¶**

```
public class PicassoEngine implements Engine {

  private Context context;

  public PicassoEngine(Context context) {
        this.context = context;
  }

  @Override
  public void load(String url, final ImageEngine.Callback callback) {
        Picasso.with(context).load(url).into(new Target() {
        @Override
        public void onBitmapLoaded(Bitmap bitmap, Picasso.LoadedFrom from) {
            // ä¸»è¦æ˜¯é€šè¿‡callbackè¿”å›Drawableå¯¹è±¡ç»™SuperTextView
            callback.onCompleted(new BitmapDrawable(Resources.getSystem(), bitmap));
        }

        @Override
        public void onBitmapFailed(Drawable errorDrawable) {

        }

        @Override
        public void onPrepareLoad(Drawable placeHolderDrawable) {

        }
    });
  }
}
```

##### 1.2.2 å®‰è£…å›¾ç‰‡å¼•æ“Engine
å®ç°å¥½ **Engine** åï¼Œä¸‹ä¸€æ­¥å°±æ˜¯è¦å°†å…¶å®‰è£…åˆ° **SuperTextView** ä¸­ã€‚

**CoorChice** å»ºè®®å¯ä»¥åœ¨ Applicationçš„`onCreate()`ä¸­è¿›è¡Œå®‰è£…ï¼Œè¿™æ ·å½“éœ€è¦ä½¿ç”¨ **SuperTextView** åŠ è½½æ˜¾ç¤ºç½‘ç»œå›¾ç‰‡çš„æ—¶å€™ï¼Œå°±èƒ½å¤Ÿç”¨åˆ°ä¸‰æ–¹å›¾ç‰‡æ¡†æ¶äº†ã€‚

```
public class STVApplication extends Application {

  @Override
  public void onCreate() {
    super.onCreate();
    // å®‰è£…å›¾ç‰‡å¼•æ“
    ImageEngine.install(new GlideEngine(this));
    // ImageEngine.install(new PicassoEngine(this));
  }
}
```

ä¸€è¡Œä»£ç ï¼Œè½»æ¾å®‰è£…ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»»ä½•æ—¶å€™ï¼Œåå®‰è£…çš„ **Engine** å®ä¾‹æ€»æ˜¯ä¼šæ›¿æ¢æ‰å…ˆå‰å®‰è£…çš„ **Engine** å®ä¾‹ï¼Œå³ **SuperTextView** åªå…è®¸å…¨å±€å­˜åœ¨ä¸€ä¸ª **Engine** å®ä¾‹ã€‚

ç°åœ¨ï¼Œä½ å¯ä»¥è®© **SuperTextView** ä½¿ç”¨æŒ‡å®šçš„ä¸‰æ–¹å›¾ç‰‡åŠ è½½æ¡†æ¶å»åŠ è½½å›¾ç‰‡äº†ã€‚

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/å›¾ç‰‡ä¸‹è½½åˆ—è¡¨æ¼”ç¤º.gif)


### 2. å¦‚ä½•å¼€å§‹SuperTextView v3.0
```
	dependencies {
	   compile 'com.github.chenBingX:SuperTextView:v3.0.0'
	}
```
### 3. å…¶å®ƒ
- ä¿®å¤ä¸€ä¸ªåŠ¨ç”»é—®é¢˜
- ä¸€äº›ä¼˜åŒ–

## v2.0 - æœªæ¥ï¼Œä»ç°åœ¨å¼€å§‹
**ä¸€ç›´ä»¥æ¥ï¼ŒCoorChiceéƒ½å¿ƒå­˜ä¸€ä¸ªè®¾æƒ³ï¼ŒæœŸå¾…ç€èƒ½å¤Ÿæ‰“é€ è¿™æ ·ä¸€ä¸ªæ§ä»¶ï¼šå®ƒèƒ½æ»¡è¶³ä½ çš„å¤§éƒ¨åˆ†å¼€å‘éœ€æ±‚ï¼Œå±•ç¤ºæ–‡å­—ã€å›¾ç‰‡ã€å‡ ä½•ã€åŠ¨ç”»ã€çŠ¶æ€ï¼Œè®©ä½ ä½¿ç”¨ä¸€ä¸ªæ§ä»¶å°±èƒ½é«˜æ•ˆçš„å®Œæˆå¤§éƒ¨åˆ†å¼€å‘å·¥ä½œã€‚å®ƒæ˜¯å¦‚æ­¤çš„å¼ºå¤§ï¼Œä»¿ä½›æœ‰å¿ƒæ™ºä¸€èˆ¬ï¼Œæ¥å—ç€ä½ çš„è¾“å…¥ï¼ŒæŒ‰ç…§ä½ çš„å¿ƒæ„ï¼Œå‘ˆç°å‡ºå¹ä¸ºè§‚æ­¢çš„ç”»é¢ã€‚éšç€ã€SuperTextView v2.0ã€‘çš„åˆ°æ¥ï¼Œæˆ‘ä»¬ç¦»è¿™ä¸ªè®¾æƒ³æ›´è¿‘äº†ä¸€æ­¥ã€‚ç°åœ¨ï¼Œæ¥å’Œã€SuperTextView v2.0ã€‘è§ä¸ªé¢å§ï¼**

![SuperTextView v2.0](https://raw.githubusercontent.com/chenBingX/img/master/stv/stv_2.0_2.png)

### 1 å›¾ç‰‡ï¼Œå°±æ˜¯ç°åœ¨
åœ¨ã€SuperTextView v2.0ã€‘ä¸­ï¼Œå¢åŠ äº†å¯¹å›¾ç‰‡å±•ç¤ºçš„æ”¯æŒã€‚ä½†ä¸ä»…ä»…æ­¢äºå±•ç¤ºå›¾ç‰‡ï¼Œå®ƒè¿˜èƒ½æ™ºèƒ½çš„æ ¹æ®ä½ çš„è¾“å…¥å°†å›¾ç‰‡å‰ªè£ä¸ºä½ æœŸæœ›çš„å½¢çŠ¶ã€‚

![image](https://raw.githubusercontent.com/chenBingX/img/master/stv/å±å¹•å¿«ç…§%202017-11-16%2001.51.33.png)

ç»™å›¾ç‰‡åŠ ä¸Šåœ†è§’ï¼ŒåŠ ä¸Šè¾¹æ¡†ï¼Œæˆ–è€…ç›´æ¥å˜æˆåœ†å½¢ï¼Œæ‰€æœ‰çš„ä¸€åˆ‡åªéœ€è¦è®¾ç½®å‡ ä¸ªç®€å•çš„å±æ€§ï¼Œå³åˆ»å‘ˆç°åœ¨ä½ çš„çœ¼å‰ã€‚

#### 1.1 å±•ç¤ºä¸€å¼ å›¾ç‰‡
å¦‚ä½•ä½¿ç”¨SuperTextViewå±•ç¤ºä¸€å¼ å›¾ç‰‡ï¼Ÿåªéœ€è¦åœ¨xmlä¸­åŠ ä¸Šä¸‹é¢ä¸¤å¥ä»£ç å³å¯ã€‚

```
<com.coorchice.library.SuperTextView
    ...
    app:stv_state_drawable="@drawable/avatar1"
    app:stv_drawableAsBackground="true"
    ...
 />
```

å¦‚æœä½ æ˜¯`SuperTextView`çš„å¿ å®ç”¨æˆ·çš„è¯ï¼Œä½ ä¼šå‘ç°ï¼ŒåŸæœ¬çš„`state_drawable`ç°åœ¨å¯ä»¥è¢«ç”¨æ¥å±•ç¤ºä¸€å¼ å›¾ç‰‡ã€‚

#### 1.2 ç»™å›¾ç‰‡åŠ ä¸Šåœ†è§’
ç°åœ¨ï¼Œä½ çš„å›¾ç‰‡å‘ˆç°åœ¨äº†ä½ çš„çœ¼å‰ï¼Œä¹Ÿè®¸ä½ è¿˜æƒ³å¯¹å®ƒåšä¸€äº›ä¸ä¸€æ ·çš„äº‹æƒ…ï¼Œæ¯”å¦‚ï¼ŒåŠ ä¸ªåœ†è§’ï¼Œæˆ–è€…ç›´æ¥å˜æˆåœ†å½¢ï¼Ÿæ²¡é—®é¢˜ï¼Œ`SuperTextView`ç°åœ¨å®Œå…¨èƒ½èƒœä»»è¿™æ ·çš„å·¥ä½œã€‚

```
<com.coorchice.library.SuperTextView
    android:layout_width="100dp"
    android:layout_height="100dp"
    ...
    app:stv_corner="15dp"
    app:stv_state_drawable="@drawable/avatar1"
    app:stv_drawableAsBackground="true"
    ...
 />
```

å¦‚æ­¤ç®€å•ï¼åœ¨åŸæ¥çš„åŸºç¡€ä¸Šä½ ä»…ä»…éœ€è¦è®¾ç½®åˆç†çš„`corner`å€¼å°±è¡Œã€‚

#### 1.3 ä¹Ÿè®¸ï¼Œä½ è¿˜æƒ³è¦è¾¹æ¡†
æœ‰æ—¶å€™ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ä¸€ä¸ªè¾¹æ¡†å»åŒ…è£¹ä½ä½ çš„å›¾ç‰‡ï¼Œå°±åƒä¸Šé¢çš„ç¤ºä¾‹é‚£æ ·ã€‚æ²¡é”™ï¼Œè¿™è‚¯å®šåœ¨`SuperTextView`èƒ½åŠ›èŒƒå›´å†…ã€‚

```
<com.coorchice.library.SuperTextView
    android:layout_width="100dp"
    android:layout_height="100dp"
    ...
    app:stv_corner="50dp"
    app:stv_stroke_color="#F4E187"
    app:stv_stroke_width="4dp"
    app:stv_state_drawable="@drawable/avatar1"
    app:stv_drawableAsBackground="true"
    ...
 />
```

`app:stv_stroke_color` æŒæ§ç€è¾¹æ¡†çš„é¢œè‰²ï¼Œ`app:stv_stroke_width` æŒæ§ç€è¾¹æ¡†çš„å®½åº¦ã€‚ä¸€åˆ‡å¦‚æ­¤æµç•…ï¼Œä¸€ä¸ªæœ‰å¿ƒæ™ºçš„æ§ä»¶æœ¬è¯¥å¦‚æ­¤ï¼Œå¯¹å—ï¼Ÿ


### 2 ç¬¬äºŒä¸ªçŠ¶æ€å›¾
é¢å¯¹å¤æ‚çš„éœ€æ±‚å˜åŒ–ï¼Œã€SuperTextViewã€‘ä¸ºåº”å¯¹è¿™ç§å¤æ‚æ€§ï¼Œå­•è‚²å‡ºäº†ç¬¬äºŒä¸ªçŠ¶æ€å›¾ `state_drawable2` ã€‚


![](https://raw.githubusercontent.com/chenBingX/img/master/stv/å±å¹•å¿«ç…§%202017-11-16%2001.46.23.png)

ç°åœ¨ï¼ŒCoorChiceå°†å‘ä½ å±•ç¤ºï¼Œä¸Šå›¾ä¸­çš„ä¸¤ç§æ•ˆæœæ˜¯å¦‚ä½•å®ç°çš„ã€‚

- **ç¤ºä¾‹ä¸€**

```
<com.coorchice.library.SuperTextView
    android:layout_width="100dp"
    android:layout_height="100dp"
    ...
    app:stv_corner="50dp"
    app:stv_state_drawable="@drawable/avatar1"
    app:stv_drawableAsBackground="true"
    // state_drawable2çš„é…ç½®ç”±æ­¤å¼€å§‹
    app:stv_isShowState2="true"
    app:stv_state_drawable2="@drawable/recousers"
    app:stv_state_drawable2_mode="rightTop"
    app:stv_state_drawable2_height="20dp"
    app:stv_state_drawable2_width="20dp"
    ...
 />
```

- **ç¤ºä¾‹äºŒ**

```
<com.coorchice.library.SuperTextView
    android:layout_width="100dp"
    android:layout_height="100dp"
    ...
    // èƒŒæ™¯å›¾
    android:background="@drawable/avatar7"
    // drawable1çš„é…ç½®ç”±æ­¤å¼€å§‹
    app:stv_isShowState="true"
    app:stv_state_drawable="@drawable/triangle"
    app:stv_state_drawable_mode="leftTop"
    app:stv_state_drawable_width="20dp"
    app:stv_state_drawable_height="20dp"
    // state_drawable2çš„é…ç½®ç”±æ­¤å¼€å§‹
    app:stv_isShowState2="true"
    app:stv_state_drawable2="@drawable/recousers"
    app:stv_state_drawable2_mode="rightTop"
    app:stv_state_drawable2_height="20dp"
    app:stv_state_drawable2_width="20dp"
    ...
 />
```

å°±å¦‚ä½ æ‰€ç†Ÿæ‚‰çš„ä¸€æ ·ï¼Œ`state_drawable2` å»¶ç»­äº†ç¬¬ä¸€ä»£ä¸€åˆ‡æµç•…çš„æ“ä½œã€‚åœ¨èªæ˜çš„ä½ åˆç†çš„ä½¿ç”¨ä¸‹ï¼Œã€SuperTextViewã€‘ä¸€å®šèƒ½å¤Ÿå¤§æ”¾å¼‚å½©ï¼ğŸ˜‰

### 3 å±äºAdjusterçš„æ—¶ä»£
æ­¤å‰ï¼Œ`Adjuster` çš„è®¾è®¡ä½¿å¾—ã€SuperTextViewã€‘å…·æœ‰äº†çµé­‚ï¼Œæˆä¸ºæ›´èªæ˜çš„æ§ä»¶ã€‚å¯¹ç»˜åˆ¶è¿‡ç¨‹çš„æ’å…¥ï¼Œè§¦æ‘¸äº‹ä»¶çš„æ•æ‰ï¼Œä½¿å¾—ä½ èƒ½è½»æ¾çš„ä»å¤–éƒ¨æ”¹å˜ä¸€ä¸ªæ§ä»¶çš„çŠ¶æ€ã€‚åˆ›æ„å§‹äºå¿ƒï¼Œè€Œè¡Œäºæ­¤ã€‚

ç°åœ¨ï¼Œã€SuperTextViewã€‘èƒ½å¤ŸåŒæ—¶æ‰¿è½½æœ€å¤š3ä¸ª `Adjuster` ï¼ä¹Ÿè®¸ï¼Œä½ çš„åˆ›æ„ä¼šæ›´åŠ çš„ç‚«ç›®ã€‚

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/å¤šAdjusteræ¼”ç¤º.gif)

åœ¨ä¸Šé¢è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒCoorChiceå°†æ—©èµ·çš„ä¸¤ä¸ªã€æ‰«å…‰ã€‘å’Œã€æ¶Ÿæ¼ªã€‘ç‰¹æ•ˆéƒ½åŠ å…¥åˆ°äº†ä¸€ä¸ªã€SuperTextViewã€‘ä¸­ï¼Œç»“æœå°±æ˜¯ä½ çœ‹åˆ°çš„è¿™æ ·ã€‚

æ›´å¤šçš„ `Adjuster` æ„å‘³ç€æ›´å¤šçš„ç»„åˆï¼Œæ›´å¤šçš„æƒŠå–œã€‚åœ¨ã€v1.4.0ã€‘ä¸­ï¼ŒCoorChiceåŒæ ·ä½¿ç”¨äº† `Adjuster` æ¥è½»æ¾çš„å®ç°äº†æŒ‰å‹å˜è‰²åŠŸèƒ½ã€‚

è¿™æ˜¯ `Adjuster` çš„æ—¶ä»£ï¼Œç¿æ™ºçš„ä½ ä¸€å®šå¯ä»¥è¿ç”¨å®ƒæŒ¥æ´’åˆ›æ„çš„ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯âš ï¸ï¼ŒåŸæœ¬çš„ `setAdjuster(Adjuster)` æ–¹æ³•ç›®å‰ä»ç„¶è¢«ä¿ç•™ï¼Œä½†ä»¥åçš„ç‰ˆæœ¬å°†ä¼šè¢«ç§»é™¤ï¼Œä½ å¿…é¡»è¦å°½å¿«è¿ç§»ã€‚æ–°çš„æ›¿ä»£æ–¹æ³•ä¸º `addAdjuster(Adjuster)` ã€‚

### 4 å…¶å®ƒ
- ä¿®æ­£æ§åˆ¶Shaderæ¨¡å¼çš„å±æ€§ `app:stv_shaderMode="leftToRight"` çš„æ‹¼å†™ã€‚åŸæ¥ä¸º `app:stv_shaderMode="leftTopRight"` ã€‚å¦‚æœä½ ä½¿ç”¨äº†è¯¥å±æ€§ï¼Œåœ¨å‡çº§ã€SuperTextView v2.0ã€‘åè¯·åŠæ—¶ä¿®æ­£ã€‚
- å¢åŠ  `set/getPressBgColor()` å’Œ `set/getPressTextColor()` ç”¨äºåœ¨ä»£ç ä¸­æ§åˆ¶æŒ‰å‹èƒŒæ™¯è‰²ã€‚

## v1.4.0
- åƒå‘¼ä¸‡å”¤ä½¿å‡ºæ¥ï¼ä½ æƒ³è¦çš„æŒ‰å‹å˜è‰²æ•ˆæœåœ¨è¿™é‡Œï¼

![image](https://raw.githubusercontent.com/chenBingX/img/master/stv/æŒ‰å‹å˜è‰².gif)

åªéœ€åœ¨xmlæ–‡ä»¶ä¸­è®¾ç½®ä»¥ä¸‹ä¸¤ä¸ªå±æ€§å°±èƒ½è½»æ¾å®ç°æŒ‰å‹å˜è‰²æ•ˆæœï¼Œä¾‹å¦‚ä¸Šå›¾é‚£æ ·çš„ï¼š

```
# è®¾ç½®æŒ‰å‹æ—¶çš„èƒŒæ™¯è‰²
app:stv_pressBgColor="@color/red"
# è®¾ç½®æŒ‰å‹æ—¶çš„æ–‡å­—é¢œè‰²
app:stv_pressTextColor="@color/white"
```
è¿™ä¸ªåŠŸèƒ½æ˜¯ä¾æ‰˜å†…ç½®ä¸€ä¸ª`Adjuster`å®ç°çš„ï¼Œä½ å¯ä»¥çœ‹çœ‹è¿™[]()ã€‚

CoorChiceæƒ³è¯´çš„æ˜¯ï¼Œ`Adjuster`æ˜¯`SuperTextView`çš„çµé­‚æ‰€åœ¨ï¼Œå®ƒèƒ½å¤Ÿè®©ä¸€åˆ‡åˆ›æ„å˜æˆå¯èƒ½ã€‚

- æš´éœ²ä¸€ä¸ªæ–°çš„æ–¹æ³•`getCorners()`ã€‚ä½ å¯ä»¥é€šè¿‡å®ƒè·å¾—`SuperTextView`çš„æ‰€æœ‰åœ†è§’ä¿¡æ¯ï¼Œæœ‰æ—¶å€™ä½ çœŸçš„å¾ˆéœ€è¦å®ƒã€‚
- å¦‚ä½•ä½¿ç”¨SuperTextView v1.4ï¼Ÿ

```
dependencies {
	compile 'com.github.chenBingX:SuperTextView:v1.4'
}
```

## v1.3
- æ”¯æŒéšæ—¶ä¿®æ”¹åŠ¨ç”»å¸§ç‡ã€‚éš¾ä»¥ç½®ä¿¡çš„æ˜¯ï¼Œä½ ç”šè‡³å¯ä»¥åœ¨åŠ¨ç”»æ‰§è¡Œè¿‡ç¨‹ä¸­éšæ—¶ä¿®æ”¹ï¼å½“ç„¶æœ€å¥½ä¸è¦è¿™ä¹ˆåšã€‚

```
mSuperTextView.setFrameRate(30);
// ä¿®æ”¹å¸§ç‡ä¸º30å¸§
```
- ä¼˜åŒ–åŠ¨ç”»é©±åŠ¨çš„æ€§èƒ½ã€‚
- é…·ç‚«ä¸æ­¢ï¼Œæ¸å˜æ¥è¢­ï¼

![link](https://raw.githubusercontent.com/chenBingX/img/master/stv/æ¸å˜è‰².png)

ä¸€è§¦å³å˜ï¼Œæƒ³è±¡ä¸è‡³äºæ­¤ã€‚è‰ºæœ¯å®¶ï¼Œå‘æŒ¥ä½ çš„åˆ›é€ åŠ›å§ï¼

åŒæ ·ï¼Œæ¸å˜æ•ˆæœçš„è®¾ç½®æ”¯æŒåœ¨xmlä¸­è®¾ç½®ï¼Œå¹¶ä¸”èƒ½å¤Ÿå³æ—¶é¢„è§ˆã€‚

```
app:stv_shaderEnable="true"
// å¿…é¡»è®¾ç½®ä¸ºtrueæ‰èƒ½å¯ç”¨æ¸å˜åŠŸèƒ½ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥çµæ´»çš„æ§åˆ¶è¿™ä¸€åŠŸèƒ½ã€‚

app:stv_shaderStartColor="@color/main_blue"
// è®¾ç½®èµ·å§‹é¢œè‰²ã€‚

app:stv_shaderEndColor="@color/pink"
// è®¾ç½®ç»“å°¾é¢œè‰²ã€‚

app:stv_shaderMode="rightToLeft"
// è®¾ç½®æ¸å˜æ¨¡å¼ã€‚å¦‚ä¸Šå›¾å¯è§ï¼Œä¸€å…±æ”¯æŒ4ä¸­æ¨¡å¼ï¼š
// topTopBottom, bottomToTop, leftToRight, rightToLeft
```
å½“ç„¶ï¼Œè¿™äº›å±æ€§ä¹Ÿéƒ½æä¾›äº†å¯¹åº”çš„`set/get`æ–¹æ³•ï¼Œä¾›ä½ åœ¨Javaä¸­åŠ¨æ€æ”¹å˜ï¼è·å–å®ƒä»¬çš„å€¼ã€‚æ¯”å¦‚ï¼š

```
mSuperTextView.setShaderStartColor(Color.RED);
```
- ç°åœ¨ï¼Œæä¾›äº†**SuperTextView**çš„è¯¦å°½æ–‡æ¡£ï¼Œä½ å¯ä»¥åˆ°è¿™ä¸‹è½½æŸ¥çœ‹ï¼ˆè§£å‹åæ‰“å¼€ç›®å½•ä¸‹çš„`index.html`å¼€å§‹ï¼‰ï¼š
[**SuperTextViewæ–‡æ¡£ï¼šhttps://chenbingx.github.io/SuperTextView/SuperTextView-doc/index.html**](https://chenbingx.github.io/SuperTextView/SuperTextView-doc/index.html)

- å¦‚ä½•ä½¿ç”¨SuperTextView 1.3
  åœ¨ä½ çš„**build.gradle**ä¸­åŠ å…¥ï¼š

```
allprojects {
    repositories {
        ...
        maven { url 'https://jitpack.io' }
    }
}

dependencies {
    compile 'com.github.chenBingX:SuperTextView:v1.3'
}
```



## v1.1
- æœ€ä½æ”¯æŒAndroid 4.0ï¼ŒSdkVersion 14ã€‚
- æ”¯æŒä¼˜é›…åŠ¨äººçš„ **ã€é“¾å¼è¡¨è¾¾å¼ã€‘** , eg:
```
mSuperTextView.setAdjuster(new MoveEffectAdjuster())
        .setAutoAdjust(true)
        .startAnim();
```
- å‡å°å ç”¨ç©ºé—´ã€‚

## v1.0

### 1 æ”¯æŒçš„å±æ€§
**SuperTextView**ååˆ†æ–¹ä¾¿çš„æ”¯æŒåœ¨xmlä¸­ç›´æ¥è®¾ç½®å±æ€§ï¼Œå¹¶ä¸”ä½ èƒ½å¤Ÿç«‹å³çœ‹åˆ°æ•ˆæœã€‚å°±åƒä½ å¹³æ—¶ä½¿ç”¨TextViewä¸€æ ·æ–¹ä¾¿ã€‚

```
<SuperTextView
    android:layout_width="50dp"
    android:layout_height="50dp"

    //è®¾ç½®åœ†è§’ã€‚ä¼šåŒæ—¶ä½œç”¨äºå¡«å……å’Œè¾¹æ¡†(å¦‚æœè¾¹æ¡†å­˜åœ¨çš„è¯)ã€‚
    //å¦‚æœè¦è®¾ç½®ä¸ºåœ†å½¢ï¼Œåªéœ€è¦æŠŠè¯¥å€¼è®¾ç½®ä¸ºå®½æˆ–é•¿çš„1/2å³å¯ã€‚
    app:stv_corner="25dp"
    //è®¾ç½®å·¦ä¸Šè§’åœ†è§’
    app:stv_left_top_corner="true"
    //è®¾ç½®å³ä¸Šè§’åœ†è§’
    app:stv_right_top_corner="true"
    //è®¾ç½®å·¦ä¸‹è§’åœ†è§’
    app:stv_left_bottom_corner="true"
    //è®¾ç½®å³ä¸‹è§’åœ†è§’
    app:stv_right_bottom_corner="true"
    //è®¾ç½®å¡«å……é¢œè‰²
    app:stv_solid="@color/red"
    //è®¾ç½®è¾¹æ¡†é¢œè‰²
    app:stv_stroke_color="@color/black"
    //è®¾ç½®è¾¹æ¡†çš„å®½åº¦ã€‚
    app:stv_stroke_width="2dp"
    //æ”¾ç½®ä¸€ä¸ªdrawableåœ¨èƒŒæ™¯å±‚ä¸Šã€‚é»˜è®¤å±…ä¸­æ˜¾ç¤ºã€‚
    //å¹¶ä¸”é»˜è®¤å¤§å°ä¸ºSuperTextViewçš„ä¸€åŠã€‚
    app:stv_state_drawable="@drawable/emoji"
    //è®¾ç½®drawableçš„æ˜¾ç¤ºæ¨¡å¼ã€‚å¯é€‰å€¼å¦‚ä¸‹ï¼š
    // leftã€topã€rightã€bottomã€center(é»˜è®¤å€¼)ã€
    //leftTopã€rightTopã€leftBottomã€rightBottomã€
    //fill(å……æ»¡æ•´ä¸ªSuperTextViewï¼Œæ­¤æ—¶ä¼šä½¿è®¾ç½®drawableçš„å¤§å°å¤±æ•ˆ)
    app:stv_state_drawable_mode="center"
    //è®¾ç½®drawableçš„height
    app:stv_state_drawable_height="30dp"
    //è®¾ç½®drawableçš„width
    app:stv_state_drawable_width="30dp"
    //è®¾ç½®drawbleç›¸å¯¹äºåŸºç¡€ä½ç½®å·¦è¾¹çš„è·ç¦»
    app:stv_state_drawable_padding_left="10dp"
    //è®¾ç½®drawbleç›¸å¯¹äºåŸºç¡€ä½ç½®ä¸Šè¾¹çš„è·ç¦»
    app:stv_state_drawable_padding_top="10dp"
    // booleanç±»å‹ã€‚æ˜¯å¦æ˜¾ç¤ºdrawableã€‚
    //å¦‚æœä½ æƒ³è¦è®¾ç½®çš„drawableæ˜¾ç¤ºå‡ºæ¥ï¼Œå¿…é¡»è®¾ç½®ä¸ºtrueã€‚
    //å½“ä¸æƒ³è®©å®ƒæ˜¾ç¤ºæ—¶ï¼Œå†è®¾ç½®ä¸ºfalseå³å¯ã€‚
    app:stv_isShowState="true"
    //æ˜¯å¦å¼€å¯æ–‡å­—æè¾¹åŠŸèƒ½ã€‚
    //æ³¨æ„ï¼Œå¯ç”¨è¿™ä¸ªæ¨¡å¼ä¹‹åé€šè¿‡setTextColor()è®¾ç½®çš„é¢œè‰²å°†ä¼šè¢«è¦†ç›–ã€‚
    //ä½ éœ€è¦é€šè¿‡text_fill_coloræ¥è®¾ç½®æ–‡å­—çš„é¢œè‰²ã€‚
    app:stv_text_stroke="true"
    // æ–‡å­—çš„æè¾¹é¢œè‰²ã€‚é»˜è®¤ä¸ºColor.BLACKã€‚
    app:stv_text_stroke_color="@color/black"
    // æ–‡å­—æè¾¹çš„å®½åº¦ã€‚
    app:stv_text_stroke_width="1dp"
    // æ–‡å­—å¡«å……çš„é¢œè‰²ã€‚é»˜è®¤ä¸ºColor.BLACKã€‚
    app:stv_text_fill_color="@color/blue"
    // booleanç±»å‹ã€‚æ˜¯å¦å¯ç”¨AdjusteråŠŸèƒ½ã€‚
    //å…·ä½“å¹²ä»€ä¹ˆï¼Œéœ€è¦åœ¨Javaä¸­ä¸ºSuperTextViewå®ç°ä¸€ä¸ªAdjusterã€‚
    //å½“ä½ å¯ç”¨è¿™ä¸ªåŠŸèƒ½è€Œæ²¡æœ‰å®ç°è‡ªå·±çš„Adjusteræ—¶ï¼Œ
    //SuperTextViewä¼šå¯ç”¨é»˜è®¤çš„Adjusterã€‚å®ƒä¼šæŒ‰ç…§ä¸€å®šçš„è§„åˆ™è°ƒæ•´æ–‡å­—å¤§å°ã€‚
    app:stv_autoAdjust="true"
    />

```

ä»¥ä¸Šè¿™äº›å±æ€§ï¼Œå‡å¯ä»¥åœ¨Javaä¸­è¿›è¡ŒåŠ¨æ€çš„è®¾ç½®ã€‚åŒæ—¶ä¹Ÿèƒ½å¤Ÿè·å¾—å®ƒä»¬çš„å€¼ã€‚ä¾‹å¦‚ï¼š


```
mSuperTextView.setCorner(10);
mSuperTextView.getCorner();
```



#### 1.1 åœ†å½¢å’Œè¾¹æ¡†

![image](https://raw.githubusercontent.com/chenBingX/img/master/stv/å±å¹•å¿«ç…§%202017-04-18%2008.15.42.png)

ä¸ºäº†å®ç°ä¸Šå›¾æ•ˆæœï¼Œé€šå¸¸ä½ éœ€è¦ç¼–å†™å’Œç®¡ç†å¤§é‡çš„<shape>æ–‡ä»¶ã€‚ç°åœ¨ä½ åªéœ€è¦åœ¨xmlæˆ–ä»£ç ä¸­å¯¹**SuperTextView**ç›´æ¥è¿›è¡Œè®¾ç½®å³å¯ã€‚

#### 1.2 ä¸ç®€å•çš„åœ†è§’
![image](https://raw.githubusercontent.com/chenBingX/img/master/stv/å±å¹•å¿«ç…§%202017-04-18%2008.15.59.png)

ä¸åŒäºç®€å•çš„åœ†è§’ï¼Œ**SuperTextView**æ”¯æŒç²¾ç¡®çš„æ§åˆ¶åœ†è§’çš„ä½ç½®ã€‚ä¸€ä¸ªã€ä¸¤ä¸ªã€ä¸‰ä¸ªéƒ½æ²¡é—®é¢˜ã€‚ä¸€åˆ‡ç”±ä½ æŒæ§ã€‚

#### 1.3 ç¥å¥‡çš„æ–‡å­—æè¾¹

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/å±å¹•å¿«ç…§%202017-04-18%2008.16.13.png)

æ–‡å­—æè¾¹ä»æœªå¦‚æ­¤ç®€å•ï¼

#### 1.4 é«˜æ•ˆçš„çŠ¶æ€å›¾

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/å±å¹•å¿«ç…§%202017-04-18%2008.16.22.png)

ä¸åŒäºåŸç”Ÿçš„Drawableï¼Œ**SuperTextView**å¯¹äºDrawableæä¾›äº†æ›´å¤šç²¾ç»†åŒ–çš„æ§åˆ¶æ“ä½œã€‚ä½ èƒ½å¤Ÿè½»æ¾çš„æŒ‡å®šDrawableå¤§å°ä»¥åŠä½ç½®ï¼Œåªéœ€ä¸€ä¸ªå±æ€§å°±èƒ½æå®šã€‚

ç›¸ä¿¡ä½ ä¸€å®šæ·±æœ‰æ„Ÿè§¦ï¼Œæƒ³è¦å®ç°ä¸Šå›¾ä¸­çš„æ•ˆæœï¼Œå¾€å¾€éœ€è¦åµŒå¥—å¤šå±‚å¸ƒå±€(ä¸€èˆ¬3å±‚å§ï¼Ÿ)ã€‚è€Œ**SuperTextView**åªéœ€ä¸€ä¸ªæ§ä»¶ï¼Œå¹¶ä¸”ååˆ†ç®€å•é«˜æ•ˆçš„å°±èƒ½å®ç°ã€‚å®ƒèƒ½å¤Ÿå¤§é‡çš„å‡å°‘ä½ çš„Appä¸­çš„å¸ƒå±€å¤æ‚ç¨‹åº¦ï¼Œå‡å°‘è§†å›¾æ ‘çš„ç»˜åˆ¶æ—¶é—´ã€‚

### 2 ç‚¸è£‚çš„Adjuster
**Adjuster**è¢«è®¾è®¡ç”¨æ¥åœ¨**SuperTextView**çš„ç»˜åˆ¶è¿‡ç¨‹ä¸­æ’å…¥ä¸€äº›æ“ä½œã€‚è¿™å…·æœ‰éå¸¸é‡è¦çš„æ„ä¹‰ã€‚æ¯”å¦‚ï¼Œé»˜è®¤å®ç°çš„**DefaultAdjuster**èƒ½å¤ŸåŠ¨æ€çš„è°ƒæ•´æ–‡å­—çš„å¤§å°ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥å®ç°å„ç§å„æ ·çš„æ•ˆæœã€‚

**æƒ³è¦Adjusterç”Ÿæ•ˆï¼Œä½ å¿…é¡»è°ƒç”¨`SuperTextView.setAutoAdjust(true)`æ¥å¯ç”¨AdjusteråŠŸèƒ½ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥æ‰€ä»¥æ–¹ä¾¿çš„åœæ­¢ï¼Œé€šè¿‡è°ƒç”¨`SuperTextView.setAutoAdjust(false)`ã€‚å¹¶ä¸”ï¼Œä½ éœ€è¦æ³¨æ„è°ƒç”¨é¡ºåºï¼Œå› ä¸ºä¸€æ—¦è°ƒç”¨äº†`SuperTextView.setAutoAdjust(true)`ï¼Œè€ŒAdjusteræ²¡æœ‰è¢«è®¾ç½®çš„è¯ï¼Œå°†ä¼šå¯ç”¨é»˜è®¤çš„`DefaultAdjuster`(å®ƒèƒ½å¤ŸåŠ¨æ€çš„è°ƒæ•´æ–‡å­—å¤§å°)ï¼Œç›´åˆ°ä½ è®¾ç½®äº†ä½ è‡ªå·±çš„Adjuster**

#### 2.1 å¹²é¢„æ§ä»¶çš„ç»˜åˆ¶
å®ç°ä¸€ä¸ªAdjusteréœ€è¦ç»§æ‰¿SuperTextView.Adjusterï¼Œå¹¶ä¸”å®ç°`adjust(SuperTextView v, Canvas canvas)`æ–¹æ³•ã€‚Adjuster.adjust()ä¼šåœ¨æ¯æ¬¡ç»˜åˆ¶è¿‡ç¨‹ä¸­è¢«è°ƒç”¨ï¼Œè¿™æ„å‘³ç€ä½ èƒ½å¤Ÿä¸å¯æ€è®®çš„ä»å¤–éƒ¨å¹²é¢„æ§ä»¶çš„ç»˜åˆ¶è¿‡ç¨‹ã€‚

```
public class YourAdjuster extends SuperTextView.Adjuster {

  @Override
  protected void adjust(SuperTextView v, Canvas canvas) {
    //do your businessã€‚
  }

}
```

**æ³¨æ„ï¼Œå¦‚æœå¼€å¯åŠ¨ç”»ï¼Œä½ å¿…é¡»ååˆ†è°¨æ…çš„ç¼–å†™adjuster()ä¸­çš„ä»£ç ã€‚å› ä¸ºåŠ¨ç”»ä¼šä»¥60å¸§/æ¯ç§’çš„é€Ÿåº¦è¿›è¡Œç»˜åˆ¶ã€‚è¿™æ„å‘³ç€ï¼Œè¿™ä¸ªæ–¹æ³•æ¯ç§’ä¼šè¢«è°ƒç”¨60æ¬¡ï¼æ‰€ä»¥ï¼Œåƒä¸‡ä¸è¦åœ¨è¿™ä¸ªæ–¹æ³•ä¸­é‡å¤çš„åˆ›å»ºå¯¹è±¡ï¼Œä¼šå¡çˆ†çš„ï¼åŸå› æ˜¯çŸ­æ—¶é—´çš„å¤§é‡å°†ä¼šå¼•èµ·ã€å†…å­˜æŠ–åŠ¨ã€‘ï¼Œå¯¼è‡´GCé¢‘ç¹å‘ç”Ÿã€‚ç›¸å…³çŸ¥è¯†ä½ å¯ä»¥çœ‹çœ‹æˆ‘çš„è¿™ä¸¤ç¯‡æ–‡ç« ï¼š**
- [ã€Androidå†…å­˜åŸºç¡€â€”â€”å†…å­˜æŠ–åŠ¨http://www.jianshu.com/p/69e6f894c698ã€‘](http://www.jianshu.com/p/69e6f894c698)
- [ã€ç”¨ä¸¤å¼ å›¾å‘Šè¯‰ä½ ï¼Œä¸ºä»€ä¹ˆä½ çš„Appä¼šå¡é¡¿?http://www.jianshu.com/p/df4d5ec779c8ã€‘](http://www.jianshu.com/p/df4d5ec779c8)


#### 2.2 å“åº”è§¦æ‘¸äº‹ä»¶

å¦‚æœä½ é‡è½½Adjusterçš„`onTouch(SuperTextView v, MotionEvent event)`æ–¹æ³•ï¼Œä½ å°†èƒ½å¤Ÿè·å¾—**SuperTextView**çš„è§¦æ‘¸äº‹ä»¶ã€‚è¿™æ˜¯é‡è¦çš„ä¸€ç‚¹ï¼Œå¦‚æœä½ æƒ³æŒç»­çš„å¯¹**SuperTextView**çš„è§¦æ‘¸äº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œä½ å¿…é¡»ä½¿`onTouch()`è¿”å›trueã€‚å¦åˆ™ä½ åªèƒ½æ¥æ”¶åˆ°ä¸€ä¸ªACTION_DOWNäº‹ä»¶ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªäº‹ä»¶æµã€‚

```
public class YourAdjuster extends SuperTextView.Adjuster {

  @Override
  protected void adjust(SuperTextView v, Canvas canvas) {
    //do your businessã€‚
  }

  @Override
  public boolean onTouch(SuperTextView v, MotionEvent event) {
    //you can get the touch event.
    //If want to get a series of touch event, you must return true here.
  }

}
```

#### 2.3 å¦‚æ­¤æƒŠè‰³çš„æ•ˆæœ

å¾—ç›Šäº**SuperTextView**å†…ç½®çš„åŠ¨ç”»é©±åŠ¨ï¼Œä½ èƒ½å¤Ÿç»“åˆAdjusteræ¥å®ç°éš¾ä»¥ç½®ä¿¡çš„åŠ¨ç”»æ•ˆæœã€‚ä¸€åˆ‡åªéœ€è¦åœ¨ä½ åˆç†çš„ç¼–å†™å¥½Adjusteråï¼Œè°ƒç”¨`startAnim()`å’Œ`stopAnim()`æ¥å¯åŠ¨ï¼åœæ­¢åŠ¨ç”»ã€‚

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/SuperTextView.gif)

å¦‚ä½ æ‰€è§ï¼Œä¸Šé¢çš„æ•ˆæœå°±æ˜¯é€šè¿‡Adjusteræ¥å®ç°çš„ã€‚å¹¶ä¸”è¿™ç§**æ‹”æ’å¼**çš„è®¾è®¡ï¼Œä½¿å¾—ä½ èƒ½å¤Ÿéšæ—¶åœ¨åŒä¸€ä¸ª**SuperTextView**ä¸Šä½¿ç”¨æ–°çš„Adjusterï¼Œä½ æ‰€æœ‰éœ€è¦åšçš„äº‹æƒ…å°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„Adjusterï¼Œç„¶åè°ƒç”¨`setAdjuster()`ã€‚

ä¹‹å‰`@Alex_Cin`å¸Œæœ›çœ‹åˆ°Rippleæ¶Ÿæ¼ªæ•ˆæœï¼Œæ‰€ä»¥åœ¨`RippleAdjuster.java`ä¸­ï¼Œæˆ‘æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨Adjusterå’ŒåŠ¨ç”»é©±åŠ¨é…åˆå®ç°ä¸Šå›¾çš„Rippleræ¶Ÿæ¼ªæ•ˆæœã€‚[ã€RippleAdjuster.javaé“¾æ¥ï¼šhttps://github.com/chenBingX/SuperTextView/blob/master/app/src/main/java/com/coorchice/supertextview/SuperTextView/Adjuster/RippleAdjuster.javaã€‘](https://github.com/chenBingX/SuperTextView/blob/master/app/src/main/java/com/coorchice/supertextview/SuperTextView/Adjuster/RippleAdjuster.java)

çœ‹ï¼Œä½ å¯ä»¥ä½¿ç”¨Adjusterå®ç°è‡ªå·±çš„Rippleæ•ˆæœã€‚

#### 2.4 æŒ‡å®šAdjusterçš„å±‚çº§
**Adjuster**è´´å¿ƒçš„è®¾è®¡äº†æ§åˆ¶ä½œç”¨å±‚çº§çš„åŠŸèƒ½ã€‚ä½ å¯ä»¥é€šè¿‡`Adjuster.setOpportunity(Opportunity opportunity)`æ¥æŒ‡å®šAdjusterçš„ç»˜åˆ¶å±‚çº§ã€‚

åœ¨**SuperTextView**ä¸­ï¼Œç»˜åˆ¶å±‚çº§è¢«ä»ä¸‹åˆ°ä¸Šåˆ†ä¸ºï¼šèƒŒæ™¯å±‚ã€Drawableå±‚ã€æ–‡å­—å±‚3ä¸ªå±‚çº§ã€‚é€šè¿‡Opportunityæ¥æŒ‡å®šä½ çš„Adjusteræƒ³è¦æ’å…¥åˆ°é‚£ä¸ªå±‚çº§é—´ã€‚

```
public enum Opportunity {
      BEFORE_DRAWABLE, //èƒŒæ™¯å±‚å’ŒDrawableå±‚ä¹‹é—´
      BEFORE_TEXT,     //Drawableå±‚å’Œæ–‡å­—å±‚ä¹‹é—´
      AT_LAST          //æœ€ä¸Šå±‚
}
```

ä¸‰ç§ç±»å‹çš„Opportunityç¤ºæ„å›¾ã€‚

![](https://raw.githubusercontent.com/chenBingX/img/master/stv/Opportunity.png)

é»˜è®¤å€¼æ˜¯`Opportunity.BEFORE_TEXT`ã€‚å³ç¬¬äºŒå¼ å›¾çš„ç¤ºä¾‹ã€‚

äº‹å®ä¸Šï¼Œåªè¦ä½ æ„¿æ„ï¼Œ**SuperTextView**å°±ç›¸å½“äºä¸€å¼ ç”»å¸ƒï¼Œä½ å¯ä»¥åœ¨ä¸Šé¢ä»»æ„çš„æŒ¥æ´’ä½ çš„åˆ›æ„ã€‚å®ƒèƒ½å¤Ÿè®©ä½ ä¸“æ³¨äºåˆ›ä½œï¼Œè€Œä¸ç”¨å»åœ¨æ„ç¼–å†™é‚£äº›æ— ç”¨éº»çƒ¦çš„ä»£ç ã€‚

ç°åœ¨ï¼Œä½ å¯ä»¥å¼€å§‹ä½¿ç”¨**SuperTextView**äº†ã€‚

> - å¦‚æœä½ å–œæ¬¢ [**SuperTextView**](https://github.com/chenBingX/SuperTextView)ï¼Œå¸Œæœ›èƒ½åˆ° [**Github**](https://github.com/chenBingX/SuperTextView) ç‚¹ä¸ª **star** [ğŸŒŸ](https://github.com/chenBingX/SuperTextView) å“¦ï¼

> - æ­¤å¤–ï¼Œ**CoorChice** ä¼šä¸å®šæœŸçš„åœ¨åšå®¢å¹³å°åˆ†äº«å¹²è´§ï¼Œå†…å®¹åŒ…æ‹¬ **Android ç›¸å…³æŠ€æœ¯**ã€**æœºå™¨å­¦ä¹ **ã€**ç®—æ³•**ã€**æ–°çš„æŠ€æœ¯**ï¼Œä»¥åŠ**ä¸€äº›å¯¹ä¸ªäººå‘å±•æå‡çš„æ„Ÿæ‚Ÿå’Œæ€è€ƒ**ã€‚å¿«è¿›å…¥ [CoorChiceçš„ã€ä¸ªäººä¸»é¡µã€‘](https://juejin.im/user/57fc43b67db2a200595ffd94) å…³æ³¨ä¸€æ³¢å§ã€‚

> - SuperTextView æŒ‡å®šå®˜æ–¹äº¤æµç¾¤ï¼š***775951525***

# License


    Copyright 2017 CoorChice

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

